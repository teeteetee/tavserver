//////////////////////////////////////////////////////////////////////
// Pano2VR pro 4.5beta2/10512 HTML5/CSS3 & WebGL Panorama Player    //
// License: Danny Times                                             //
// (c) 2014, Garden Gnome Software, http://ggnome.com               //
//////////////////////////////////////////////////////////////////////

var m=!0,p=null,s=!1;
function N(k,q,h,G,B){var n=this;n.x=k;n.y=q;n.e=h;n.H=G;n.n=B;n.q=function(k,h,q){n.x=k;n.y=h;n.e=q;n.H=void 0;n.n=void 0};n.toString=function(){return"("+n.x+","+n.y+","+n.e+") - ("+n.H+","+n.n+")"};n.k=function(k){var h=Math.sin(k),k=Math.cos(k),q=n.y,B=n.e;n.y=k*q-h*B;n.e=h*q+k*B};n.l=function(k){var h=Math.sin(k),k=Math.cos(k),q=n.x,B=n.e;n.x=k*q+h*B;n.e=-h*q+k*B};n.fa=function(k){var h=Math.sin(k),k=Math.cos(k),q=n.x,B=n.y;n.x=k*q-h*B;n.y=h*q+k*B};n.Ka=function(){return new N(n.x,n.y,n.e,n.H,
n.n)};n.length=function(){return Math.sqrt(n.x*n.x+n.y*n.y+n.e*n.e)};n.va=function(k){return n.x*k.x+n.y*k.y+n.e*k.e};n.Na=function(k,h){var q;q=Math.cos(h*Math.PI/180);n.x=q*Math.sin(k*Math.PI/180);n.y=Math.sin(h*Math.PI/180);n.e=q*Math.cos(k*Math.PI/180)};n.$a=function(k,h,q){n.x=k.x*q+h.x*(1-q);n.y=k.y*q+h.y*(1-q);n.e=k.e*q+h.e*(1-q);n.H=k.H*q+h.H*(1-q);n.n=k.n*q+h.n*(1-q)}}glMatrixArrayType="undefined"!=typeof Float32Array?Float32Array:"undefined"!=typeof WebGLFloatArray?WebGLFloatArray:Array;
function Aa(k){k[0]=1;k[1]=0;k[2]=0;k[3]=0;k[4]=0;k[5]=1;k[6]=0;k[7]=0;k[8]=0;k[9]=0;k[10]=1;k[11]=0;k[12]=0;k[13]=0;k[14]=0;k[15]=1}
function Fb(k,q,h){var G,B=h[0],n=h[1],h=h[2],W=Math.sqrt(B*B+n*n+h*h);if(W){1!=W&&(W=1/W,B*=W,n*=W,h*=W);var ta=Math.sin(q),Ua=Math.cos(q),ja=1-Ua,q=k[0],W=k[1],rb=k[2],Va=k[3],Ba=k[4],Wa=k[5],da=k[6],Xa=k[7],La=k[8],Ya=k[9],Za=k[10],$a=k[11],Ma=B*B*ja+Ua,ab=n*B*ja+h*ta,bb=h*B*ja-n*ta,Na=B*n*ja-h*ta,cb=n*n*ja+Ua,db=h*n*ja+B*ta,eb=B*h*ja+n*ta,B=n*h*ja-B*ta,n=h*h*ja+Ua;G?k!=G&&(G[12]=k[12],G[13]=k[13],G[14]=k[14],G[15]=k[15]):G=k;G[0]=q*Ma+Ba*ab+La*bb;G[1]=W*Ma+Wa*ab+Ya*bb;G[2]=rb*Ma+da*ab+Za*bb;G[3]=
Va*Ma+Xa*ab+$a*bb;G[4]=q*Na+Ba*cb+La*db;G[5]=W*Na+Wa*cb+Ya*db;G[6]=rb*Na+da*cb+Za*db;G[7]=Va*Na+Xa*cb+$a*db;G[8]=q*eb+Ba*B+La*n;G[9]=W*eb+Wa*B+Ya*n;G[10]=rb*eb+da*B+Za*n;G[11]=Va*eb+Xa*B+$a*n}}function Vb(k,q,h){var k=0.1*Math.tan(k*Math.PI/360),q=k*q,G=-q,B=-k;h||(h=new glMatrixArrayType(16));var n=q-G,W=k-B;h[0]=0.2/n;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=0.2/W;h[6]=0;h[7]=0;h[8]=(q+G)/n;h[9]=(k+B)/W;h[10]=-100.1/99.9;h[11]=-1;h[12]=0;h[13]=0;h[14]=-20/99.9;h[15]=0}
function Ec(){var k="perspective",q=["Webkit","Moz","O","ms","Ms"],h;h=s;for(h=0;h<q.length;h++)"undefined"!==typeof document.documentElement.style[q[h]+"Perspective"]&&(k=q[h]+"Perspective");"undefined"!==typeof document.documentElement.style[k]?"webkitPerspective"in document.documentElement.style?(k=document.createElement("style"),q=document.createElement("div"),h=document.head||document.getElementsByTagName("head")[0],k.textContent="@media (-webkit-transform-3d) {#ggswhtml5{height:5px}}",h.appendChild(k),
q.id="ggswhtml5",document.documentElement.appendChild(q),h=5===q.offsetHeight,k.parentNode.removeChild(k),q.parentNode.removeChild(q)):h=m:h=s;return h}function Fc(){var k;if(k=!!window.WebGLRenderingContext)try{var q=document.createElement("canvas");q.width=100;q.height=100;var h=q.getContext("webgl");h||(h=q.getContext("experimental-webgl"));k=h?m:s}catch(G){k=s}return k}
function pano2vrPlayer(k){function q(a){var e,c;c=[];e=a.getAttributeNode("title");c.title=e?e.nodeValue.toString():"";e=a.getAttributeNode("description");c.description=e?e.nodeValue.toString():"";e=a.getAttributeNode("author");c.author=e?e.nodeValue.toString():"";e=a.getAttributeNode("datetime");c.datetime=e?e.nodeValue.toString():"";e=a.getAttributeNode("copyright");c.copyright=e?e.nodeValue.toString():"";e=a.getAttributeNode("source");c.source=e?e.nodeValue.toString():"";e=a.getAttributeNode("info");
c.information=e?e.nodeValue.toString():"";e=a.getAttributeNode("comment");c.comment=e?e.nodeValue.toString():"";e=a.getAttributeNode("latitude");c.latitude=e?1*e.nodeValue:"0.0";e=a.getAttributeNode("longitude");c.longitude=e?1*e.nodeValue:"0.0";if(e=a.getAttributeNode("tags")){a=e.nodeValue.toString().split("|");for(e=0;e<a.length;e++)""==a[e]&&(a.splice(e,1),e--);c.tags=a}else c.tags=[];return c}function h(a){Gb="{"==a.charAt(0)?a.substr(1,a.length-2):"";b.skinObj&&b.skinObj.changeActiveNode&&b.skinObj.changeActiveNode(a)}
function G(a){return function(){b.dirty=m;b.Ma=m;a.d&&(a.a&&a.a.complete?(a.loaded=m,a.d.drawImage(a.a,0,0,a.width,a.height),a.a=p,a.D=p):a.D&&a.D.complete&&!a.loaded&&(a.d.drawImage(a.D,0,0,a.width,a.height),a.D=p))}}function B(a){for(var e=0;e<C.length;e++)if(C[e].id==a)return C[e];for(e=0;e<y.length;e++)if(y[e].id==a)return y[e];return p}function n(a){try{a.obj=document.createElement("img");a.obj.setAttribute("style","-webkit-user-drag:none; max-width:none;");a.obj.setAttribute("class","ggmedia");
b.W&&a.obj.setAttribute("id",b.W+a.id);a.obj.ondragstart=function(){return s};if(1==a.u||4==a.u)a.o=function(){a.V(!a.v)},a.ca=function(){a.na=s;a.obj.style[ua]="none"},a.V=function(c){a.v=c;a.obj.style.zIndex=a.v?8E4:0;a.obj.style[ua]="all 1s ease 0s";a.na=m;Wb()},a.obj.addEventListener(ta(),a.ca,s),a.obj.addEventListener("transitionend",a.ca,s);a.obj.setAttribute("src",ka(a.url));a.z&&(a.obj.width=a.z);a.B&&(a.obj.height=a.B);ra.push(a);a.obj.style.position="absolute";a.o&&(a.obj.onclick=a.o);r.appendChild(a.obj)}catch(e){}}
function W(a){try{a.obj=document.createElement("video");a.obj.setAttribute("class","ggmedia");b.W&&a.obj.setAttribute("id",b.W+a.id);a.obj.setAttribute("style","max-width:none;");if(1==a.u||4==a.u)a.o=function(){a.V(!a.v)},a.ca=function(){a.na=s;a.obj.style[ua]="none"},a.V=function(c){a.v=c;a.v?(a.obj.style.zIndex=8E4,a.obj.style[ua]="all 1s ease 0s",b.playSound(a.id)):(a.obj.style.zIndex=0,a.obj.style[ua]="all 1s ease 0s");a.na=m;Wb()},a.obj.addEventListener(ta(),a.ca,s),a.obj.addEventListener("transitionend",
a.ca,s);2==a.u&&(a.o=function(){b.playPauseSound(a.id)},a.V=function(c){c?b.playSound(a.id):b.pauseSound(a.id)});var e;for(e=0;e<a.url.length;e++){var c;c=document.createElement("source");c.setAttribute("src",ka(a.url[e]));a.obj.appendChild(c)}""!=a.poster&&(a.obj.poster=ka(a.poster),0>a.loop&&(a.obj.gb="none"));a.obj.volume=a.j*X;0==a.loop&&(a.obj.r=1E7);1<=a.loop&&(a.obj.r=a.loop-1);if((1==a.mode||2==a.mode||3==a.mode||5==a.mode)&&0<=a.loop)a.obj.autoplay=m;y.push(a);a.obj.style.position="absolute";
a.z&&(a.obj.width=a.z);a.B&&(a.obj.height=a.B);r.appendChild(a.obj);a.o&&(a.obj.onclick=a.o);a.Qa=m;a.obj.addEventListener("ended",function(){if(0<this.r)return this.r--,this.currentTime=0,this.play(),m;this.Qa=s},s)}catch(g){}}function ta(){var a,e=document.createElement("fakeelement"),c={OTransition:"oTransitionEnd",MSTransition:"msTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",transition:"transitionEnd"};for(a in c)if(void 0!==e.style[a])return c[a]}function Ua(a){var e=
-1;try{for(var c=0;c<C.length;c++)C[c].id==a.id&&C[c].obj!=p&&C[c].url.join()==a.url.join()&&C[c].loop==a.loop&&C[c].mode==a.mode&&(e=c);if(-1==e){for(c=0;c<C.length;c++)if(C[c].id==a.id&&C[c].obj!=p){try{C[c].obj.pause()}catch(g){}try{C[c].obj.parentElement.removeChild(C[c].obj),delete C[c].obj,C[c].obj=p}catch(d){}e=c}a.obj=document.createElement("audio");a.obj.setAttribute("class","ggmedia");b.W&&a.obj.setAttribute("id",b.W+a.id);for(c=0;c<a.url.length;c++){var f;f=document.createElement("source");
""!=a.url[c]&&"#"!=a.url[c]&&(f.setAttribute("src",ka(a.url[c])),a.obj.appendChild(f))}a.obj.volume=a.j*X;0==a.loop&&(a.obj.r=1E7);1<=a.loop&&(a.obj.r=a.loop-1);if((1==a.mode||2==a.mode||3==a.mode||5==a.mode)&&0<=a.loop)a.obj.autoplay=m;0<=e?C[e]=sound:C.push(a);0<a.obj.childNodes.length&&(b.c.appendChild(a.obj),a.obj.addEventListener("ended",function(){if(0<this.r)return this.r--,this.currentTime=0,this.play(),m},s))}}catch(l){}}function ja(){var a;Z=document.createElement("div");Z.innerHTML=Dd("PGRpdiBzdHlsZT0icG9zaXRpb246IHJlbGF0aXZlOyBsZWZ0OiAwcHg7IHJpZ2h0OiAwcHg7IHRvcDogNDAlOyBib3R0b206IDYwJTsgbWFyZ2luOiBhdXRvOyB3aWR0aDogMThlbTsgaGVpZ2h0OiA0ZW07IGJvcmRlcjogM3B4IHNvbGlkICM1NTU7IGJveC1zaGFkb3c6IDVweCA1cHggMTBweCAjMzMzOyBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsgZGlzcGxheTogdGFibGU7IGZvbnQtZmFtaWx5OiBWZXJkYW5hLCBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmOyBmb250LXNpemU6IDEwcHQ7IG9wYWNpdHk6IDAuOTU7IGJvcmRlci1yYWRpdXM6IDE1cHg7Ij48cCBzdHlsZT0idGV4dC1hbGlnbjogY2VudGVyOyBkaXNwbGF5OiB0YWJsZS1jZWxsOyB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOyAiPkNyZWF0ZWQgd2l0aCA8YSBocmVmPSJodHRwOi8vcGFubzJ2ci5jb20vIiB0YXJnZXQ9Il9ibGFuayI+UGFubzJWUjwvYT48L3A+PC9kaXY+");
a="top:  0px;left: 0px;width: 100px;height: 100px;overflow: hidden;z-index: 5000;position:relative;";"-webkit-"==O&&(a+=O+"transform: translateZ(99999999999999px);");Z.setAttribute("style",a);b.c.insertBefore(Z,b.c.firstChild);Z.style.width=0+ba+Xb+z+"px";Z.style.height=0+ea+Yb+t+"px";Z.onclick=function(){Z&&(b.c.removeChild(Z),Z=p)};Z.oncontextmenu=Z.onclick}function rb(){var a;a=new N;a.Na(x,u);for(var e=0;e<C.length+y.length;e++){var c;c=e<C.length?C[e]:y[e-C.length];if(c.obj){var b;b=c.pan-x;
for(var d=c.tilt-u;-180>b;)b+=360;for(;180<b;)b-=360;var f=c.aa,l=c.field;0==l&&(l=0.01);0>l&&(l=A);c.n||(c.n=new N,c.n.Na(c.pan,c.tilt));if(3==c.mode){b=Math.abs(b);b=b<c.s?0:b-c.s;var la=c.j,d=Math.abs(d),d=d<c.M?0:d-c.M,o=1-d/l;if(Math.abs(b)>l||0>o)c.obj.volume=la*f*X;else{var k=1-Math.abs(b/l);c.obj.volume=la*(f+(1-f)*o*k)*X}}4==c.mode&&c.eb==p&&(Math.abs(b)<c.s&&Math.abs(d)<c.M?c.ga||(c.ga=m,c.obj.play()):c.ga=s);5==c.mode&&(b=180*Math.acos(a.va(c.n))/Math.PI,b<c.s?c.obj.volume=c.j*X:(b-=c.s,
b<l&&0<l?(k=1-Math.abs(b/l),c.obj.volume=c.j*(f+(1-f)*k)*X):c.obj.volume=f*X));6==c.mode&&(b=180*Math.acos(a.va(c.n))/Math.PI,Math.abs(b)<c.s?c.ga||(c.ga=m,c.obj.play()):c.ga=s)}}}function Va(){setTimeout(function(){b.setFullscreen(s)},10);setTimeout(function(){b.setFullscreen(s)},100)}function Ba(){var a=new Date;Zb=0;0<=S&&(Oa?(ma=0.4*(Ca-sb),na=0.4*(Da-tb),sb+=ma,tb+=na):(ma=0.1*-ub*fb/8,na=0.1*-vb*fb/8),Gc(ma,na),b.update());wb&&(b.changeFov(0.4*(T-A)),0.0010>Math.abs(T-A)/A&&(wb=s),b.update());
if($b&&(0!=ma||0!=na)&&0>S)ma*=0.9,na*=0.9,0.1>ma*ma+na*na?na=ma=0:(Gc(ma,na),b.update());if(0!=Pa){var e=fb/8;switch(Pa){case 37:b.changePan(e*da(),m);break;case 38:b.changeTilt(e*da(),m);break;case 39:b.changePan(-e*da(),m);break;case 40:b.changeTilt(-e*da(),m);break;case 43:case 107:case 16:b.changeFovLog(-e,m);break;case 17:case 18:case 109:case 45:case 91:b.changeFovLog(e,m)}b.update()}if(!b.isLoaded&&b.hasConfig){for(var c=0,e=0;e<b.checkLoaded.length;e++)b.checkLoaded[e].complete&&"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYBgeACDAAADIAAE3iTbkAAAAAElFTkSuQmCC"!=
b.checkLoaded[e].src&&c++;c==b.checkLoaded.length?(Hb=1,b.isLoaded=m,b.divSkin&&b.divSkin.ggLoaded&&b.divSkin.ggLoaded(),Ib&&gb&&!hb&&(ca=m)):Hb=c/(1*b.checkLoaded.length)}for(;360<x;)x-=360;for(;-360>x;)x+=360;if(hb){E=ac-x;if(360==ib-jb){for(;-180>E;)E+=360;for(;180<E;)E-=360}M=bc-u;L=cc-A;e=Hc*da();c=Math.sqrt(E*E+M*M+L*L);if(10*c<e){if(hb=s,L=M=E=0,b.onMoveComplete)b.onMoveComplete()}else c=c>5*e?e/c:0.2,E*=c,M*=c,L*=c;x+=E;u+=M;A+=L;dc=a.getTime();b.update()}else if(ca)if(e=a.getTime()-kb,0<
ec&&b.Aa&&e>=1E3*ec){if(1<sa.length){if(Ic){e=1E3;do c=sa[Math.floor(Math.random()*sa.length)];while(e--&&c==Gb)}else e=sa.indexOf(Gb),e++,e>=sa.length&&(e=0),c=sa[e];kb=a.getTime();b.openNext("{"+c+"}")}}else M=Jb*(0-u)/100,L=Jb*(Kb-A)/100,E=0.95*E+0.05*-Qa*da(),x+=E,u+=M,A+=L,b.update();else{if(gb&&0>S&&a.getTime()-dc>1E3*fc&&(Ib&&b.isLoaded||!Ib))ca=m,kb=a.getTime(),L=M=E=0;if($b&&0==Pa&&0>S&&(0!=E||0!=M||0!=L))E*=0.9,M*=0.9,L*=0.9,x+=E,u+=M,b.changeFovLog(L),1.0E-4>E*E+M*M+L*L&&(L=M=E=0),b.update()}Jc&&
(Lb?a.getTime()-gc>=1E3*Kc&&(Lb=s):(Ra+=lb,0>Ra&&(Ra=0,lb=-lb,Lb=m,gc=a.getTime()),1<Ra&&(Ra=1,lb=-lb,Lb=m,gc=a.getTime()),b.setOverlayOpacity(Ra)));if(0<y.length)for(e=0;e<y.length;e++)y[e].Qa&&y[e].Ya!=y[e].obj.currentTime&&(y[e].Ya=y[e].obj.currentTime,!y[e].Ta&&0<y[e].obj.videoHeight&&(y[e].Ta=y[e].obj.videoWidth/y[e].obj.videoHeight));if(0<U){if(2==U)for(e=0;e<H.length;e++)a=H[e],"poly"==a.type&&a.A!=a.p&&(a.A>a.p?(a.p+=0.05,a.A<a.p&&(a.p=a.A)):(a.p-=0.05,a.A>a.p&&(a.p=a.A)),b.update());3==U&&
va!=fa&&(va>fa?(fa+=0.05,va<fa&&(fa=va)):(fa-=0.05,va>fa&&(fa=va)),b.update())}rb();b.dirty&&(0<b.ja?b.ja--:(b.dirty=s,b.ja=0),b.updatePanorama());Lc?setTimeout(function(){Ba()},1E3/60):Mc(function(){Ba()})}function Wa(){setTimeout(function(){Wa()},200);5<Zb&&(Mc=function(){return function(a){window.setTimeout(a,10)}},Lc=m,Ba());Zb++}function da(){return Math.min(1,2*Math.tan(Math.PI*A/360))}function Xa(a){b.skinObj&&b.skinObj.hotspotProxyClick&&b.skinObj.hotspotProxyClick(a.id);""!=a.url&&(b.openUrl(a.url,
a.target),Nc(-1,-1))}function La(){if(b.isFullscreen&&(!document.webkitIsFullScreen&&!document.mozFullScreen&&!document.fullScreen&&b.exitFullscreen(),document.webkitIsFullScreen||document.mozFullScreen||document.fullScreen))b.c.style.left="0px",b.c.style.top="0px"}function Ya(){Pa=0}function Za(a){Pa&&(Pa=0,a.preventDefault(),I())}function $a(a){Mb||(b.isFullscreen&&a.preventDefault(),Pa=a.keyCode,I())}function Ma(a){$||(a.preventDefault(),I(),Sa&&Sa.reset())}function ab(a){$||(a.preventDefault(),
1!=a.scale&&(wb=m,Nb*=a.scale,T=mb/Math.sqrt(Nb),T>oa&&(T=oa),T<ga&&(T=ga),b.update(),I()))}function bb(a){!$&&Ea(a.target)&&(a.preventDefault(),wb=m,T=mb/Math.sqrt(a.scale),T>oa&&(T=oa),T<ga&&(T=ga),b.update(),I())}function Na(a){hc=m;Nb=1;$||(a.touches?(b.m=a.touches.target,Ea(a.target)&&(a.preventDefault(),mb=A,I())):(a.preventDefault(),mb=A,I()))}function cb(a){!Sa&&window.MSGesture&&(Sa=new MSGesture,Sa.target=b.control);Sa&&Sa.addPointer(a.pointerId)}function db(){$||(S=-2)}function eb(a){var e;
if(!$){0<=S&&I();var c=(new Date).getTime();e=-1;var g,d,f=m;e=Math.abs(Oc-xb)+Math.abs(Pc-yb);if(0<=e&&20>e){a.preventDefault();if(Ea(b.m)&&(g=ic(b.mouse.x,b.mouse.y)))b.hotspot=g;if(b.m){e=b.m;for(d=s;e&&e!=b.control;)e.onclick&&!d&&(e.onclick(),d=m,f=s),e=e.parentNode}e=Math.abs(Qc-xb)+Math.abs(Rc-yb);if(700>c-b.da&&0<=e&&20>e){a.preventDefault();Ea(b.m)&&jc&&setTimeout(function(){b.toggleFullscreen()},1);if(b.m){e=b.m;for(d=s;e&&e!=b.control;)e.ondblclick&&!d&&(e.ondblclick(),d=m,f=s),e=e.parentNode}b.da=
0}else b.da=c;Qc=xb;Rc=yb}if(b.m){a.preventDefault();e=b.m;for(d=s;e&&e!=b.control;){if(e.onmouseout)e.onmouseout();e.onmouseup&&!d&&(e.onmouseup(),d=m);e=e.parentNode}}b.m=p;S=-11;g&&f&&Xa(g);b.hotspot=b.emptyHotspot}}function Ed(a){a||(a=window.event);var e=a.touches,c=zb();b.mouse.x=e[0].pageX-c.x;b.mouse.y=e[0].pageY-c.y;if(!$){e[0]&&(xb=e[0].pageX,yb=e[0].pageY);if(0<=S){a.preventDefault();for(c=0;c<e.length;c++)if(e[c].identifier==S){Sc(e[c].pageX,e[c].pageY);break}I()}2==e.length&&e[0]&&e[1]&&
(S=-6,hc||(Tc=Math.sqrt((e[0].pageX-e[1].pageX)*(e[0].pageX-e[1].pageX)+(e[0].pageY-e[1].pageY)*(e[0].pageY-e[1].pageY)),wb=m,T=mb*Math.sqrt(Uc/Tc),T>oa&&(T=oa),T<ga&&(T=ga),I(),a.preventDefault()))}}function Fd(a){a||(a=window.event);var e=a.touches,c=zb();b.mouse.x=e[0].pageX-c.x;b.mouse.y=e[0].pageY-c.y;if(!$){if(0>S&&e[0]){kc=(new Date).getTime();Oc=e[0].pageX;Pc=e[0].pageY;xb=e[0].pageX;yb=e[0].pageY;b.m=e[0].target;if(Ea(a.target)){if((c=Vc(b.mouse.x,b.mouse.y))&&c.o)c.o();else{var c=e[0].pageX,
g=e[0].pageY;lc=c;mc=g;Ca=c;Da=g;sb=c;tb=g;S=e[0].identifier}a.preventDefault();I()}if(b.m){c=b.m;for(flag=s;c&&c!=b.control;){if(c.onmouseover)c.onmouseover();c.onmousedown&&!flag&&(c.onmousedown(),flag=m);c=c.parentNode}flag&&a.preventDefault()}}1<e.length&&(S=-5);!hc&&2==e.length&&e[0]&&e[1]&&(Uc=Math.sqrt((e[0].pageX-e[1].pageX)*(e[0].pageX-e[1].pageX)+(e[0].pageY-e[1].pageY)*(e[0].pageY-e[1].pageY)),mb=A);vb=ub=0}}function nc(a){if(!oc&&(a=a?a:window.event,Ea(a.target))){var e=a.detail?-1*a.detail:
a.wheelDelta/40;Wc&&(e=-e);a.axis&&1!=a.axis&&(e=0);var c=0<e?1:-1;0!=e&&(b.changeFovLog(c*Xc,m),b.update());a.preventDefault();I()}}function Yc(a){a=a?a:window.event;if(!$&&0<=S){a.preventDefault();S=-3;vb=ub=0;var a=(new Date).getTime(),e=-1,e=Math.abs(lc-Ca)+Math.abs(mc-Da);400>a-kc&&0<=e&&20>e&&((e=ic(b.mouse.x,b.mouse.y))&&Xa(e),e=Math.abs(Zc-Ca)+Math.abs($c-Da),700>a-b.da&&0<=e&&20>e?(jc&&setTimeout(function(){b.toggleFullscreen()},10),b.da=0):b.da=a,Zc=Ca,$c=Da);I()}}function ad(a){var a=a?
a:window.event,e=zb();document.webkitIsFullScreen||document.mozFullScreen||document.fullScreen?(b.mouse.x=a.screenX,b.mouse.y=a.screenY):(b.mouse.x=a.pageX-e.x,b.mouse.y=a.pageY-e.y);if(!$&&(0<=S&&(a.preventDefault(),(a.which||0==a.which||1==a.which)&&Sc(a.pageX,a.pageY),I()),b.hotspot==b.emptyHotspot||"poly"==b.hotspot.type)){var c=b.emptyHotspot;0<H.length&&Ea(a.target)&&(c=ic(b.mouse.x,b.mouse.y));b.hotspot!=c&&(b.hotspot!=b.emptyHotspot&&(0<U&&(b.hotspot.A=0),b.skinObj&&b.skinObj.hotspotProxyOut&&
b.skinObj.hotspotProxyOut(b.hotspot.id)),c?(b.hotspot=c,b.skinObj&&b.skinObj.hotspotProxyOver&&b.skinObj.hotspotProxyOver(b.hotspot.id),P.style.cursor="pointer",0<U&&(va=1,b.hotspot.A=1)):(b.hotspot=b.emptyHotspot,P.style.cursor="auto",0<U&&(va=0)));Nc(a.pageX-e.x,a.pageY-e.y)}}function Nc(a,e){var c=Ob;c.enabled&&(b.hotspot!=b.emptyHotspot&&0<=a&&0<=e&&""!=b.hotspot.title?(K.innerHTML=b.hotspot.title,K.style.color=Fa(c.Da,c.Ca),K.style.backgroundColor=c.background?Fa(c.O,c.N):"transparent",K.style.border=
"solid "+Fa(c.Q,c.P)+" "+c.xa+"px",K.style.borderRadius=c.wa+"px",K.style.textAlign="center",0<c.width?(K.style.left=a-c.width/2+ba+"px",K.style.width=c.width+"px"):(K.style.width="auto",K.style.left=a-K.offsetWidth/2+ba+"px"),K.style.height=0<c.height?c.height+"px":"auto",K.style.top=e+25+ +ea+"px",K.style.visibility="inherit",K.style.overflow="hidden"):(K.style.visibility="hidden",K.innerHTML=""))}function bd(a){var e=zb();document.webkitIsFullScreen||document.mozFullScreen||document.fullScreen?
(b.mouse.x=a.screenX,b.mouse.y=a.screenY):(b.mouse.x=a.pageX-e.x,b.mouse.y=a.pageY-e.y);if(Z)Z.onclick();if(!$){a=a?a:window.event;if((a.which||0==a.which||1==a.which)&&Ea(a.target)){if((e=Vc(b.mouse.x,b.mouse.y))&&e.o)e.o();else{var e=a.pageX,c=a.pageY;lc=e;mc=c;Ca=e;Da=c;sb=e;tb=c;S=1;kc=(new Date).getTime()}a.preventDefault();I()}vb=ub=0}}function Vc(a,e){var c=b.R(),g;for(g=0;g<y.length+ra.length;g++){var d;d=g<y.length?y[g]:ra[g-y.length];if(d.v)return d}for(g=0;g<y.length+ra.length;g++){d=g<
y.length?y[g]:ra[g-y.length];var f=[],l=new N,la,o,k;0<d.I&&(o=Math.tan(d.I/2*Math.PI/180),k=0<d.z?o*d.B/d.z:o,d.K&&1!=d.K&&(k*=d.K));for(la=0;4>la;la++){switch(la){case 0:l.q(-o,-k,-1);break;case 1:l.q(o,-k,-1);break;case 2:l.q(o,k,-1);break;case 3:l.q(-o,k,-1)}l.k(-d.tilt*Math.PI/180);l.l(d.pan*Math.PI/180);l.l(-x*Math.PI/180);l.k(u*Math.PI/180);f.push(l.Ka())}f=Pb(f);if(0<f.length){for(la=0;la<f.length;la++){l=f[la];if(0.1>l.e){var n=-c/l.e;px=z/2+l.x*n;py=t/2+l.y*n}else py=px=0;l.Z=px;l.F=py}if(cd(f,
a,e))return d}}}function Ea(a){return a==b.control||a&&a.ggType&&"container"==a.ggType?m:s}function I(){ca&&(ca=s,L=M=E=0);hb&&(hb=s,L=M=E=0);dc=(new Date).getTime()}function Sc(a,e){pc=a;qc=e;ub=pc-Ca;vb=qc-Da;Oa&&(Ca=pc,Da=qc,b.update())}function Gc(a,e){var c=b.getVFov();x+=a*c/t;u+=e*c/t;Ta()}function dd(a){rc=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,rc);var e=[-1,-1,1,1,-1,1,1,1,1,-1,1,1];for(i=0;12>i;i++)2>i%3&&(e[i]*=a);f.bufferData(f.ARRAY_BUFFER,new Float32Array(e),f.STATIC_DRAW);Qb=
f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,Qb);f.bufferData(f.ARRAY_BUFFER,new Float32Array([1,0,0,0,0,1,1,1]),f.STATIC_DRAW);Rb=f.createBuffer();f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,Rb);f.bufferData(f.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),f.STATIC_DRAW)}function ed(){var a,e;if(aa)for(;0<aa.length;)f.deleteTexture(aa.pop());aa=[];for(var c=0;6>c;c++)e=f.createTexture(),e.ua=p,e.qa=p,e.Pa=s,f.bindTexture(f.TEXTURE_2D,e),f.texImage2D(f.TEXTURE_2D,0,f.RGB,1,1,0,f.RGB,f.UNSIGNED_BYTE,
p),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),nb[c]&&(a=new Image,a.crossOrigin="anonymous",a.src=ka(nb[c]),e.ua=a,a.addEventListener&&a.addEventListener("load",sc(e),s),b.checkLoaded.push(a)),aa.push(e);for(c=0;6>c;c++)Sb[c]&&(a=new Image,a.crossOrigin="anonymous",a.src=ka(Sb[c]),a.addEventListener?a.addEventListener("load",sc(aa[c]),s):a.onload=sc(aa[c]),
aa[c].qa=a,b.checkLoaded.push(a));for(c=0;c<y.length;c++)y[c].cb=f.createTexture(),f.bindTexture(f.TEXTURE_2D,y[c].cb),f.texImage2D(f.TEXTURE_2D,0,f.RGB,1,1,0,f.RGB,f.UNSIGNED_BYTE,p),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);f.bindTexture(f.TEXTURE_2D,p)}function fd(a){var e=curCfNr,c=tx,b=ty,d=F.length-1-a,f=gd,l="x";switch(e){case 0:l="f";break;case 1:l=
"r";break;case 2:l="b";break;case 3:l="l";break;case 4:l="u";break;case 5:l="d"}for(var k=0;3>k;k++)f=Ga(f,"c",e),f=Ga(f,"s",l),f=Ga(f,"r",a),f=Ga(f,"l",d),f=Ga(f,"x",c),f=Ga(f,"y",b),f=Ga(f,"v",b),f=Ga(f,"h",c);return ka(f)}function Ga(a,e,c){var b=RegExp("%0*"+e,"i").exec(a.toString());if(b){var b=b.toString(),d=c.toString();for(b.charAt(b.length-1)!=e&&(d=(1+c).toString());d.length<b.length-1;)d="0"+d;a=a.replace(b,d)}return a}function ka(a){return a?"{"==a.charAt(0)||"/"==a.charAt(0)||0<a.indexOf("://")||
0==a.indexOf("javascript:")?a:Ab+a:Ab}function sc(a){return function(){try{f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,m);var e=s;a.qa!=p&&a.qa.complete?a.Pa||(f.bindTexture(f.TEXTURE_2D,a),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,a.qa),e=a.Pa=m):a.ua!=p&&a.ua.complete&&(f.bindTexture(f.TEXTURE_2D,a),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,a.ua),e=m);e&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),
f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),a.loaded=m);f.bindTexture(f.TEXTURE_2D,p)}catch(c){}b.update()}}function Wb(){var a=Math.round(b.R()),e;for(e=0;e<y.length+ra.length;e++){var c;c=e<y.length?y[e]:ra[e-y.length];pa||hd(a);var g="";pa&&(g+="perspective("+a+"px) ");var g=g+("translate3d(0px,0px,"+a+"px) "),g=g+("rotateX("+u.toFixed(10)+"deg) "),g=g+("rotateY("+(-x).toFixed(10)+"deg) "),g=g+("rotateY("+c.pan.toFixed(10)+
"deg) "),g=g+("rotateX("+(-c.tilt).toFixed(10)+"deg) "),d=1E4,f=c.obj.videoWidth,l=c.obj.videoHeight;if(0==f||0==l)f=640,l=480;0<c.z&&(f=c.z);0<c.B&&(l=c.B);0<f&&0<l&&(c.obj.width=f+"px",c.obj.Za=l+"px",c.obj.style.width=f+"px",c.obj.style.Za=l+"px");0<c.I&&(d=f/(2*Math.tan(c.I/2*Math.PI/180)));g+="translate3d(0px,0px,"+(-d).toFixed(10)+"px) ";g+="rotateZ("+c.fa.toFixed(10)+"deg) ";g+="rotateY("+(-c.l).toFixed(10)+"deg) ";g+="rotateX("+c.k.toFixed(10)+"deg) ";c.K&&1!=c.K&&(g+="scaleY("+c.K+") ");
g+="translate3d("+-f/2+"px,"+-l/2+"px,0px) ";c.obj.style[Q+"Origin"]="0% 0%";c.v&&(g="",1==c.u&&(d=Math.min(z/f,t/l),g+="scale("+d+") "),g+="translate3d("+-f/2+"px,"+-l/2+"px,0px) ");c.Xa!=g&&(c.Xa=g,c.obj.style[Q]=g,c.obj.style.left=ba+z/2+"px",c.obj.style.top=ea+t/2+"px",c.obj.style.visibility="visible",c.na&&c.Wa==c.v&&(c.obj.style[ua]="all 0s linear 0s"),c.Wa=c.v)}}function id(){for(var a=0,e=Math.tan(b.getVFov()*Math.PI/360),c=t/(2*e),c=c*(1+e*(z/t)/2),c=c*Math.pow(2,jd);F.length>=a+2&&F[a+1].width>
c;)a++;return a}function kd(){for(var a=0;a<F.length;a++){level=F[a];for(var e in level.g)level.g.hasOwnProperty(e)&&(level.g[e].ia=s)}}function ld(){var a;for(a=0;6>a;a++){var e;e=b.f.i[a];if(e.C){var c;c=[];c.push(new N(-1,-1,-1,0,0));c.push(new N(1,-1,-1,1,0));c.push(new N(1,1,-1,1,1));c.push(new N(-1,1,-1,0,1));for(var g=0;g<c.length;g++)4>a?c[g].l(a*(-Math.PI/2)):c[g].k((4==a?-1:1)*(Math.PI/2)),c[g].l(-x*Math.PI/180),c[g].k(u*Math.PI/180);c=Pb(c);for(var d={la:1,ma:1,oa:0,pa:0},g=0;g<c.length;g++)d.la=
Math.min(d.la,c[g].H),d.oa=Math.max(d.oa,c[g].H),d.ma=Math.min(d.ma,c[g].n),d.pa=Math.max(d.pa,c[g].n);d.Fa=d.oa-d.la;d.Ja=d.pa-d.ma;d.scale=Math.max(d.Fa,d.Ja);e.sa=d}else e.sa=p}}function md(a){var e=level,c={};c.T=a.la*(e.width/J);c.U=a.ma*(e.height/J);c.X=a.oa*(e.width/J);c.Y=a.pa*(e.height/J);c.T=Math.min(Math.max(0,Math.floor(c.T)),e.G-1);c.U=Math.min(Math.max(0,Math.floor(c.U)),e.$-1);c.X=Math.min(Math.max(0,Math.floor(c.X)),e.G-1);c.Y=Math.min(Math.max(0,Math.floor(c.Y)),e.$-1);return c}function nd(a){return function(){b.dirty=
m;b.S=m;R&&R--;0==R&&b.divSkin&&b.divSkin.ggLoadedLevels&&b.divSkin.ggLoadedLevels();a.a=p}}function Gd(a){return function(){b.dirty=m;b.Ma=m;b.S=m;a.loaded=m;a.a&&!a.b&&r.appendChild(a.a);R&&R--;0==R&&b.divSkin&&b.divSkin.ggLoadedLevels&&b.divSkin.ggLoadedLevels();a.a&&a.d&&(a.d.drawImage(a.a,0,0),a.a=p)}}function od(){return function(){b.dirty=m;b.S=m;R&&R--;0==R&&b.divSkin&&b.divSkin.ggLoadedLevels&&b.divSkin.ggLoadedLevels()}}function Hd(a){return function(){b.dirty=m;b.Ma=m;b.S=m;a.loaded=m;
R&&R--;0==R&&b.divSkin&&b.divSkin.ggLoadedLevels&&b.divSkin.ggLoadedLevels();try{f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,m),a.a!=p&&a.a.complete&&(a.L=f.createTexture(),f.bindTexture(f.TEXTURE_2D,a.L),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,a.a),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),
f.bindTexture(f.TEXTURE_2D,p))}catch(e){}b.update()}}function Ta(){var a,e;0<tc&&(a=ob,F&&0<F.length&&(a=F[0].height),ga=360*Math.atan2(t/2,a/2*tc)/Math.PI);A<ga&&(A=ga);A>oa&&(A=oa);e=b.getVFov()/2;a=180*Math.atan(z/t*Math.tan(e*Math.PI/180))/Math.PI;2*e>Ha-Ia&&(e=(Ha-Ia)/2);b.setVFov(2*e);90>Ha?u+e>Ha&&(u=Ha-e):u>Ha&&(u=Ha);-90<Ia?u-e<Ia&&(u=Ia+e):u<Ia&&(u=Ia);if(359.99>ib-jb){var c=0;if(0!=u){var g,d=t/2;g=d*Math.tan(e*Math.PI/180);d/=Math.tan(Math.abs(u)*Math.PI/180);d-=g;0<d&&(c=180*Math.atan(1/
(d/g))/Math.PI,c=c*(ib-jb)/360)}x+(a+c)>ib&&(x=ib-(a+c),ca&&(Qa=-Qa,E=0));x-(a+c)<jb&&(x=jb+(a+c),ca&&(Qa=-Qa,E=0));90<u+e&&(u=90-e);-90>u-e&&(u=-90+e)}}function ic(a,e){for(var c=-1,b=0;b<H.length;b++){var d=H[b];"poly"==d.type&&d.ta&&0<d.ta.length&&cd(d.ta,a,e)&&(c=b)}return 0<=c?H[c]:s}function cd(a,e,c){var b,d,f=s;for(b=0,d=a.length-1;b<a.length;d=b++){var l=a[b];d=a[d];l.F>c!=d.F>c&&e<(d.Z-l.Z)*(c-l.F)/(d.F-l.F)+l.Z&&(f=!f)}return f}function Fa(a,e){a=Number(a);return"rgba("+(a>>16&255)+","+
(a>>8&255)+","+(a&255)+","+e+")"}function hd(a){!pa&&b.ab!=a&&(b.ab=a,P.style[wa]=a+"px",P.style[wa+"Origin"]=ba+z/2+"px "+(ea+t/2)+"px ",r.style[wa]=a+"px",r.style[wa+"Origin"]=ba+z/2+"px "+(ea+t/2)+"px ")}function Pb(a){a=Bb(a,pd);a=Bb(a,qd);a=Bb(a,rd);a=Bb(a,sd);return a=Bb(a,td)}function Bb(a,e){if(0==a.length)return a;var c,b,d,f,l,k,o,n=[];c=e.va(a[0])-0;for(f=0;f<a.length;f++){k=f;o=f+1;o==a.length&&(o=0);b=e.va(a[o])-0;if(0<=c&&0<=b)n.push(a[k]);else if(0<=c||0<=b)d=b/(b-c),0>d&&(d=0),1<d&&
(d=1),l=new N,l.$a(a[k],a[o],d),0>c||n.push(a[k]),n.push(l);c=b}return n}function zb(){var a={x:0,y:0},e=r;if(e.offsetParent){do a.x+=e.offsetLeft,a.y+=e.offsetTop;while(e=e.offsetParent)}return a}function xa(){b.setViewerSize(b.ba.offsetWidth,b.ba.offsetHeight)}function ud(a){if(debug=document.getElementById("debug"))debug.innerHTML=a+"<br />";window.console&&window.console.log(a)}var Ob,U,fa,va,uc,vc,wc,xc,yc;function Dd(a){var e="",c,b,d="",f,l="",k=0,a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");do c=
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),c=c<<2|b>>4,b=(b&15)<<4|f>>2,d=(f&3)<<6|l,e+=String.fromCharCode(c),64!=f&&(e+=String.fromCharCode(b)),64!=l&&(e+=String.fromCharCode(d));
while(k<a.length);return e}function Id(a,e){var c=this;c.bb=a;c.hotspot=e;c.__div=document.createElement("div");c.a=document.createElement("img");var b;c.a.setAttribute("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA5xJREFUeNqclmlIVFEUx997TjrplFQW2WKBBSYtRFlpWUILSSsRZRQIBdGHCFqIoKIvQRsUFRJC9LEgaSFbMMpcWi1pLzOLsjItKms0U5t5/c/wH7nc5o2jF374xrv87z33nHOPaRsRtbFgDpgJxoD+wATfwDNQDK6CyrCr5OcbhgiGIRsUAZt4QTWoIFXgp9JfAhY7rgdBl8NeBoLDYBloA+dBOagFTcDHcVEgDgwBGWA+OAcugvXgvb5wKMGJoAAMp9BpUA96EBf/Btsf8BI8AWfAErAcpHHDZeriliY2AVwDg8AucAQ0Ag+I4XhTm2Oxz8PT46KMbTx5EZjuJDgAnAVusJUm9DhYwalFcc59sIXXIaceFkowDySBPTRPL20xm+b7zYXa+N3CPrWJ6GuwGySA40HLBHc/GywFhbS5R1lEBrZy7FQwiSaX9pmnqeAYt+KUcew7BVZw/QKTq0ocpYPVvDOXItZCk2xgDIZqL8BR8Ab0VDbr4yZOgLeIwzQx6WiQxcCt1+6sld66L4yYtFSwF4yg2dU7/cEwGW9YVkAwmycp1dzdpvgm0DcCh4kHmxWzBls0uBX4qqmZJ4KzePm1IeJLgjmlC16aDKZpp5Q168B3o6wsSwTHgU+MIUs74RSj6y1d+212HKimJlUE+tFRfJpYtOKNXWmJTASqWf2Bu/R6+4TKHOrOzG4IhptjWgHbGkZvepQ6SQK7oRuCXzjX1DJavBEX1ygfT8FgBqpfm1zRDcEKbR2bsZlkJCdXieB1ZhZ5YtqVgXIPN+m9kbY6hpdb+d9fPncJRmZmqQheZkemJmgxyxykl3XWJEkcAl7N21s7PDcl5ZJ0PAa3wVwmWtVbZafPwQ7wLozYB7ATPNJO56d/LAikP9u+66KNJS1d4IOZp7wU0hfLukUyzgwm70T2N/DOxIy/eFdqawa5DL2NEGwP5k15Ja4woz9glvcomd9NzyvkFcQo5gomaLfm5c0svnKZ2k7q7+FauvR2MJKZR3+sY5WgtvkdG6JyELGhNHMTXyGfLviRJ5Tcd4Dlhle7086Sgp8CqVxDkn4OqHaqacr5ekjy3Q/W0FRNNGmoMtamdzdxsytZC0lqXKhEgWPVVgImg2NgFT1MHOoOk3yLEtgWN5TEOYvoIFI1rGM19//2wpAD7imF7lfwENwAxaASNCj90pcLLKdC2Iyw1M9gnEplMEp5kOU1f8WwKGJm8oUr9f8JMAAVMDM6HSDa9QAAAABJRU5ErkJggg%3D%3D");
c.a.setAttribute("style","position: absolute;top: -14px;left: -14px; "+O+"user-select: none;");c.a.ondragstart=function(){return s};c.__div.appendChild(c.a);b="position:absolute;"+(O+"user-select: none;");"-webkit-"==O&&(b+=O+"transform: translateZ(9999999px);");c.__div.setAttribute("style",b);c.__div.onclick=function(){c.bb.openUrl(e.url,e.target)};var d=Ob;d.enabled&&(c.text=document.createElement("div"),b="position:absolute;"+("left: -"+e.w/2+"px;"),b=b+"top:  20px;"+("width: "+e.w+"px;"),b=0==
e.h?b+"height: auto;":b+("height: "+e.h+"px;"),e.wordwrap?b=b+"white-space: pre-wrap;"+("width: "+e.w+"px;"):(b=0==e.h?b+"width: auto;":b+("width: "+e.w+"px;"),b+="white-space: nowrap;"),b+=O+"transform-origin: 50% 50%;",c.text.setAttribute("style",b+"visibility: hidden;border: 1px solid #000000;background-color: #ffffff;text-align: center;overflow: hidden;padding: 0px 1px 0px 1px;"),c.text.style.color=Fa(d.Da,d.Ca),c.text.style.backgroundColor=d.background?Fa(d.O,d.N):"transparent",c.text.style.border=
"solid "+Fa(d.Q,d.P)+" "+d.xa+"px",c.text.style.borderRadius=d.wa+"px",c.text.style.textAlign="center",c.text.style.width=0<d.width?d.width+"px":"auto",c.text.style.height=0<d.height?d.height+"px":"auto",c.text.style.overflow="hidden",c.text.innerHTML=e.title,c.__div.onmouseover=function(){0==e.h&&(w=c.text.offsetWidth,c.text.style.left=-w/2+"px");c.text.style.visibility="inherit"},c.__div.onmouseout=function(){c.text.style.visibility="hidden"},c.__div.appendChild(c.text))}var b=this;b.transitionsDisabled=
s;var x=0,zc=0,jb=0,ib=360,E=0,vd=0,u=0,Ac=0,Ia=-90,Ha=90,M=0,A=90,Kb=90,ga=1,tc=0,oa=170,mb=0,L=0,Bc=0,Uc,Tc,z=320,t=480,lc=0,mc=0,Ca=0,Da=0,Zc=0,$c=0,pc=0,qc=0,ub=0,vb=0,S=-1,Oc=0,Pc=0,xb=0,yb=0,Qc=0,Rc=0,kc,$b=m,sb=0,tb=0,ma=0,na=0,wb=s,T=0,Pa=0,r=p,ya=p,ha=p,P=b.c=p,Y=p;b.control=p;b.checkLoaded=[];b.isFullscreen=s;b.dirty=s;b.ja=1;b.divSkin=p;b.isLoaded=s;b.hasConfig=s;b.startNode="";b.onMoveComplete=p;var Hb=0,Sb=[],nb=[],ob=1,Cb=1,Db=1024,wd=0,xd=0,gb=s,fc=5,ca=s,Ib=s,Qa=0.4,Jb=0,ec=0,Ic=m,
kb,hb=s,Hc=0.1,ac=0,bc=0,cc,dc;b.skinObj=p;b.userdata={};b.userdata.title="";b.userdata.description="";b.userdata.author="";b.userdata.datetime="";b.userdata.copyright="";b.userdata.source="";b.userdata.information="";b.userdata.comment="";b.userdata.tags=[];var H=[];b.emptyHotspot={pan:0,tilt:0,title:"",url:"",target:"",id:"",skinid:"",w:100,h:20,wordwrap:s,obj:p,type:"empty"};var C=[],y=[],ra=[],pb=[],sa=[],X=1,F=[],qb="0x000000",jd=0.4,qa,J,gd,Ra=0,lb=0.01,Kc=2,gc=0,Lb=s,Jc=s,ba=0,ea=0,Xb=0,Yb=
0,Mb=s,$=s,oc=s,Oa=m,Wc=s,Xc=1,jc=m,fb=8;U=1;fa=0;va=0;uc=255;vc=1;wc=255;xc=0.3;Ob={enabled:m,width:180,height:20,Da:0,Ca:1,background:m,O:16777215,N:1,Q:0,P:1,wa:3,xa:1,wordwrap:m};yc=void 0;b.hotspot=b.emptyHotspot;var K=p;b.S=m;b.mouse={x:0,y:0};var za=s,Ja=s,Cc=s,yd=s,Dc=m,hc=s,R=0,Tb=10,zd=200,Ab="",O="",ua="transition",Q="transform",wa="perspective",f,pd=new N,qd=new N,rd=new N,sd=new N,td=new N;b.Aa=s;var Gb="";unusedTileCanvas=[];var Jd=navigator.userAgent.match(/(MSIE)/g)?m:s,Ad=navigator.userAgent.match(/(Safari)/g)?
m:s;navigator.userAgent.match(/(Chrome)/g)&&(Ad=s);var Bd=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?m:s,Kd=navigator.userAgent.match(/(android)/i)?m:s,Lc=s,Mc=function(){var a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;return Bd||!a?function(a){window.setTimeout(a,10)}:a}();b.detectBrowser=function(){var a=["Webkit","Moz","O","ms","Ms"],e;O="";ua="transition";Q="transform";
wa="perspective";for(e=0;e<a.length;e++)"undefined"!==typeof document.documentElement.style[a[e]+"Transform"]&&(O="-"+a[e].toLowerCase()+"-",ua=a[e]+"Transition",Q=a[e]+"Transform",wa=a[e]+"Perspective");yd=Ec();za=Fc();Ja=Ec();za&&(Ja=s);pa=m;Eb=s;(Bd||Kd)&&b.setMaxTileCount(80);ud("Pano2VR player - Prefix:"+O+", "+(yd?"CSS 3D available":"CSS 3D not available")+", "+(za?"WebGL available":"WebGL not available"))};b.setMaxTileCount=function(a){zd=a};b.f=new function(){var a=this;a.i=[];a.ka=[];for(i=
0;6>i;i++)a.i[i]={C:m};a.ya=function(b,c){for(var g=0;6>g;g++){var d;if(d=a.i[g]){var f;f=[];f.push(new N(-1,-1,-1,0,0));f.push(new N(1,-1,-1,1,0));f.push(new N(1,1,-1,1,1));f.push(new N(-1,1,-1,0,1));for(var l=0;l<f.length;l++)4>g?f[l].l(g*(-Math.PI/2)):f[l].k((4==g?-1:1)*(Math.PI/2)),f[l].l(-b*Math.PI/180),f[l].k(c*Math.PI/180);f=Pb(f);d.C=0<f.length}}}};b.setElementIdPrefix=function(a){b.W=a};b.getPercentLoaded=function(){return Hb};b.setBasePath=function(a){Ab=a};b.R=function(){return 1*t/(2*
Math.tan(Math.PI/180*(b.getVFov()/2)))};b.setViewerSize=function(a,e){b.isFullscreen&&(a=window.innerWidth,e=window.innerHeight);var c=a-ba-Xb,g=e-ea-Yb;r.style.width=c+"px";r.style.height=g+"px";r.style.left=ba+"px";r.style.top=ea+"px";if(za)try{ya&&(ya.width=c,ya.height=g),f&&(f.Ia=c,f.Ha=g,f.viewport(0,0,c,g))}catch(d){alert(d)}ha&&(ha.style.width=a+"px",ha.style.height=e+"px",ha.width=a,ha.height=e);P&&(P.style.width=a+"px",P.style.height=e+"px",Y.style.width=a+"px",Y.style.height=e+"px",Y.width=
a,Y.height=e,Y.style.left=ba+"px",Y.style.top=ea+"px",b.divSkin&&b.divSkin!=P&&(b.divSkin.style.width=a+"px",b.divSkin.style.height=e+"px"));b.hasConfig&&b.updatePanorama();b.divSkin&&b.divSkin.ggUpdateSize&&b.divSkin.ggUpdateSize(a,e)};b.setMargins=function(a,b,c,g){ba=a;ea=b;Xb=c;Yb=g;xa()};b.changeViewMode=function(a){0==a&&(Oa=s);1==a&&(Oa=m);2==a&&(Oa=Oa?s:m)};b.changePolygonMode=function(a,e){U=1==e&&0<U?0:Math.round(a);b.update()};b.polygonMode=function(){return U};var V;b.getVFov=function(){var a;
switch(Bc){case 0:a=A/2;break;case 1:a=180*Math.atan(t/z*Math.tan(A/2*Math.PI/180))/Math.PI;break;case 2:a=180*Math.atan(t/Math.sqrt(z*z+t*t)*Math.tan(A/2*Math.PI/180))/Math.PI;break;case 3:a=4*t/3>z?A/2:180*Math.atan(4*t/(3*z)*Math.tan(A/2*Math.PI/180))/Math.PI}return 2*a};b.setVFov=function(a){var a=a/2,b;switch(Bc){case 0:A=2*a;break;case 1:a=180*Math.atan(z/t*Math.tan(a*Math.PI/180))/Math.PI;A=2*a;break;case 2:b=Math.sqrt(z*z+t*t);a=180*Math.atan(b/t*Math.tan(a*Math.PI/180))/Math.PI;A=2*a;break;
case 3:4*t/3>z||(a=180*Math.atan(3*z/(4*t)*Math.tan(a*Math.PI/180))/Math.PI),A=2*a}};b.update=function(a){b.dirty=m;a&&(b.ja=a)};b.updatePanorama=function(){var a=b.R(),e=Math.atan2(z/2+1,a),c=Math.atan2(t/2+1,a),a=Math.sin(e),g=Math.sin(c),e=Math.cos(e),c=Math.cos(c);pd.q(0,0,-1);qd.q(e,0,-a);rd.q(-e,0,-a);sd.q(0,c,-g);td.q(0,-c,-g);a=new N(0,0,-100);g=b.R();for(e=0;e<H.length;e++){var c=H[e],d,k;if("point"==c.type){a.q(0,0,-100);a.k(-c.tilt*Math.PI/180);a.l(c.pan*Math.PI/180);a.l(-x*Math.PI/180);
a.k(u*Math.PI/180);var l=s;0.01>a.e?(k=-g/a.e,d=a.x*k,k*=a.y,Math.abs(d)<z/2+500&&Math.abs(k)<t/2+500&&(l=m)):k=d=0;c.obj&&c.obj.__div&&(c.obj.__div.style[ua]="none",c.obj.ggUse3d?(pa||hd(g),c.obj.__div.style.width="1px",c.obj.__div.style.height="1px",hs="",pa&&(hs+="perspective("+g+"px) "),hs+="translate3d(0px,0px,"+g+"px) ",hs+="rotateX("+u.toFixed(10)+"deg) ",hs+="rotateY("+(-x).toFixed(10)+"deg) ",hs+="rotateY("+c.pan.toFixed(10)+"deg) ",hs+="rotateX("+(-c.tilt).toFixed(10)+"deg) ",hs+="translate3d(0px,0px,"+
(-1*c.obj.gg3dDistance).toFixed(10)+"px) ",c.obj.__div.style[Q+"Origin"]="0% 0%",c.obj.__div.style[Q]=hs,c.obj.__div.style.left=ba+z/2+"px",c.obj.__div.style.top=ea+t/2+"px"):l?(c.obj.__div.style.left=ba+d+z/2+"px",c.obj.__div.style.top=ea+k+t/2+"px"):(c.obj.__div.style.left="-1000px",c.obj.__div.style.top="-1000px"))}if("poly"==c.type){for(var n=[],l=0;l<c.ha.length;l++)d=c.ha[l],a.q(0,0,-100),a.k(-d.tilt*Math.PI/180),a.l(d.pan*Math.PI/180),a.l(-x*Math.PI/180),a.k(u*Math.PI/180),n.push(a.Ka());n=
Pb(n);if(0<n.length)for(l=0;l<n.length;l++)a=n[l],0.1>a.e?(k=-g/a.e,d=z/2+a.x*k,k=t/2+a.y*k):k=d=0,a.Z=d,a.F=k;c.ta=n}}if(Y&&(yc!=U&&(yc=U,Y.style.visibility=0<U?"inherit":"hidden"),0<U)){V||(V=Y.getContext("2d"));if(V.width!=z||V.height!=t)V.width=z,V.height=t;V.clear?V.clear():V.clearRect(0,0,Y.width,Y.height);a=1;3==U&&(a=fa);for(g=0;g<H.length;g++)if(e=H[g],"poly"==e.type&&(c=e.ta,2==U&&(a=e.p),V.fillStyle=Fa(e.O,e.N*a),V.strokeStyle=Fa(e.Q,e.P*a),0<c.length)){V.beginPath();for(j=0;j<c.length;j++)v=
c[j],0==j?V.moveTo(v.Z,v.F):V.lineTo(v.Z,v.F);V.closePath();V.stroke();V.fill()}}if(za)if(0<F.length){Ta();if(z!=r.offsetWidth||t!=r.offsetHeight)z=parseInt(r.offsetWidth),t=parseInt(r.offsetHeight);Dc&&(b.initWebGL(0),xa());if(f){f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT);Aa(Ka);Vb(b.getVFov(),f.Ia/f.Ha,Ka);f.uniformMatrix4fv(D.ra,s,Ka);b.f.ya(x,u);Tb=1;ld();kd();var o=id(),h;for(h=F.length-1;h>=o;){level=F[h];a=1;h==F.length-1&&0==qa&&(a=J/(J-0.5));for(curCfNr=0;6>curCfNr;curCfNr++)if(g=b.f.i[curCfNr],
e=g.sa,Aa(ia),Fb(ia,-u*Math.PI/180,[1,0,0]),Fb(ia,(180-x)*Math.PI/180,[0,1,0]),4>curCfNr?Fb(ia,-Math.PI/2*curCfNr,[0,1,0]):Fb(ia,Math.PI/2*(5==curCfNr?1:-1),[1,0,0]),g.C&&e&&0<e.Fa&&0<e.Ja&&0<e.scale||level.t){g.dirty=s;level.t?(c={T:0,U:0},c.X=level.G-1,c.Y=level.$-1):c=md(e);for(ty=c.U;ty<=c.Y;ty++)for(tx=c.T;tx<=c.X;tx++){d=tx+ty*level.G+curCfNr*level.G*level.$;(e=level.g[d])||(e=level.g[d]={});R<Tb&&!e.a&&(xd++,e.a=new Image,e.a.onload=Hd(e),e.a.onerror=od(),e.a.onabort=od(),e.a.setAttribute("src",
fd(h)),level.t&&b.checkLoaded.push(e.a),0==R&&b.divSkin&&b.divSkin.ggReLoadedLevels&&b.divSkin.ggReLoadedLevels(),R++,b.dirty=m);if(e.L){if(e.za)f.bindBuffer(f.ARRAY_BUFFER,e.za);else{d=2*h+1;e.za=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,e.za);l=[-1,-1,1,1,-1,1,1,1,1,-1,1,1];l[0]=-2*a*Math.min((tx+1)*J,level.width)-qa;l[1]=-2*a*Math.min((ty+1)*J,level.height)-qa;l[3]=-2*a*tx*J+qa;l[4]=l[1];l[6]=l[3];l[7]=-2*a*ty*J+qa;l[9]=l[0];l[10]=l[7];for(i=0;12>i;i++)l[i]=0==i%3?d*(l[i]/level.width+1):1==
i%3?d*(l[i]/level.height+1):d;f.bufferData(f.ARRAY_BUFFER,new Float32Array(l),f.STATIC_DRAW)}f.vertexAttribPointer(D.Ga,3,f.FLOAT,s,0,0);f.bindBuffer(f.ARRAY_BUFFER,Qb);f.vertexAttribPointer(D.Ea,2,f.FLOAT,s,0,0);f.activeTexture(f.TEXTURE0);f.bindTexture(f.TEXTURE_2D,e.L);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,
f.CLAMP_TO_EDGE);f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,Rb);f.uniform1i(D.Sa,0);f.uniformMatrix4fv(D.Ra,s,ia);f.uniformMatrix4fv(D.ra,s,Ka);f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0)}e.ia=g.C}}h--}for(o=0;o<F.length;o++){level=F[o];for(var q in level.g)level.g.hasOwnProperty(q)&&(e=level.g[q],!e.ia&&!level.t&&(e.L&&f.deleteTexture(e.L),e.a=p,delete level.g[q]))}b.S=s}}else{Ta();if(z!=r.offsetWidth||t!=r.offsetHeight)z=parseInt(r.offsetWidth),t=parseInt(r.offsetHeight);Dc&&(b.initWebGL(0),xa());
if(f){f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT);Aa(Ka);Vb(b.getVFov(),f.Ia/f.Ha,Ka);f.uniformMatrix4fv(D.ra,s,Ka);for(v=0;6>v;v++)Aa(ia),Fb(ia,-u*Math.PI/180,[1,0,0]),Fb(ia,(180-x)*Math.PI/180,[0,1,0]),4>v?Fb(ia,-Math.PI/2*v,[0,1,0]):Fb(ia,Math.PI/2*(5==v?1:-1),[1,0,0]),f.bindBuffer(f.ARRAY_BUFFER,rc),f.vertexAttribPointer(D.Ga,3,f.FLOAT,s,0,0),f.bindBuffer(f.ARRAY_BUFFER,Qb),f.vertexAttribPointer(D.Ea,2,f.FLOAT,s,0,0),6<=aa.length&&aa[v].loaded&&(f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,
aa[v]),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,Rb),f.uniform1i(D.Sa,0),f.uniformMatrix4fv(D.Ra,s,ia),f.uniformMatrix4fv(D.ra,s,Ka),f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0))}}else if(Ja)if(0<F.length){Ta();q=q=a=s;Cd++;if(z!=r.offsetWidth||t!=r.offsetHeight)z=parseInt(r.offsetWidth),t=parseInt(r.offsetHeight),r.style[Q+"OriginX"]=z/2+"px",r.style[Q+"OriginY"]=t/2+"px",a=m;h=Math.round(b.R());if(b.ea!=h||a)b.ea=h,pa||(r.style[wa]=h+"px",r.style[wa+"Origin"]="50% 50%");b.f.ya(x,u);Tb=1;if(0<F.length){ld();
kd();g=0;l="";for(curCfNr=0;6>curCfNr;curCfNr++)a=b.f.i[curCfNr],a.C&&(g=Math.max(g,a.sa.scale),l=l+curCfNr+",");g=id();for(e=F.length-1;e>=g;){level=F[e];c=1;e==F.length-1&&0==qa&&(c=J/(J-2));for(curCfNr=0;6>curCfNr;curCfNr++)if(a=b.f.i[curCfNr],d=a.sa,a.C&&d&&0<d.Fa&&0<d.Ja&&0<d.scale||level.t){a.dirty=s;level.t?(n={T:0,U:0},n.X=level.G-1,n.Y=level.$-1):n=md(d);for(ty=n.U;ty<=n.Y;ty++)for(tx=n.T;tx<=n.X;tx++){l=tx+ty*level.G+curCfNr*level.G*level.$;(d=level.g[l])||(d=level.g[l]={});if(!d.b&&R<Tb){if(0<
unusedTileCanvas.length){d.b=unusedTileCanvas.shift();for(l=r.firstChild;l&&l.J&&(-1==l.J||l.J>=e);)l=l.nextSibling;r.insertBefore(d.b,l);d.d=d.b.Va}else if(wd<zd){wd++;d.b=document.createElement("canvas");d.b.width=J+2*qa;d.b.height=J+2*qa;d.d=d.b.getContext("2d");d.b.Va=d.d;d.b.style[Q+"Origin"]="0% 0%";d.b.style.overflow="hidden";d.b.style.position="absolute";for(l=r.firstChild;l&&l.J&&(-1==l.J||l.J>=e);)l=l.nextSibling;r.insertBefore(d.b,l)}d.b&&(xd++,d.a=new Image,d.a.style[Q+"Origin"]="0% 0%",
d.a.style.position="absolute",d.a.style.overflow="hidden",d.b.J=e,q&&(d.b.id="tile"+curCfNr+"_"+e+"___"+ty+"_"+tx),d.a.onload=Gd(d),d.a.onerror=nd(d),d.a.onabort=nd(d),d.a.setAttribute("src",fd(e)),level.t&&b.checkLoaded.push(d.a),0==R&&b.divSkin&&b.divSkin.ggReLoadedLevels&&b.divSkin.ggReLoadedLevels(),R++,b.dirty=m)}d.b&&(l="",pa?(l+="translate3d("+z/2+"px,"+t/2+"px,0px) ",l+=" perspective("+h+"px) ",l+="translate3d(0px,0px,"+h+"px) "):l+="translate3d("+z/2+"px,"+t/2+"px,"+h+"px) ",l+="rotateX("+
Number(u).toFixed(10)+"deg)  rotateY("+Number(-x).toFixed(10)+"deg) ",l=4>curCfNr?l+("rotateY("+-90*curCfNr+"deg)"):l+("rotateX("+(4==curCfNr?-90:90)+"deg)"),k=1,Eb?(k=(2*e+1)*J/level.width*(Db/J),k=Ad?2/Math.tan(A*Math.PI/360)*k:2*k,l+=" scale("+k*c*c+")"):k=1/(c*c),l+=" translate3d("+(1/c*tx*J-qa-level.width/2)+"px,"+(1/c*ty*J-qa-level.width/2)+"px,"+-level.width*k/2+"px)",q&&(d.b.id="rtile_"+Cd+"_"+curCfNr+"_"+e+"___"+ty+"_"+tx),a.C&&(d.ia=m,d.b?d.b.style[Q]=l:d.a&&(d.a.style[Q]=l)))}}e--}for(h=
0;h<F.length;h++)for(o in level=F[h],level.g)level.g.hasOwnProperty(o)&&(d=level.g[o],!d.ia&&d.b&&(level.t?(l="translate3d(-10px,-10px,0px) scale(0.001,0.001)",d.b?(d.b.style[Q]=l,q&&(d.b.id="cache")):d.a&&(d.a.style[Q]="")):(d.d&&(d.d.clear?d.d.clear():d.d.clearRect(0,0,d.d.canvas.width,d.d.canvas.height)),unusedTileCanvas.push(d.b),d.b?(q&&(d.b.id="unused"),l="translate3d(-10px,-10px,0px) scale(0.001,0.001)",d.b.style[Q]=l,d.b.J=-1):d.loaded&&r.removeChild(d.a),d.b=p,d.a=p,d.d=p,delete level.g[o])));
b.S=s}}else{Ta();q=s;if(z!=r.offsetWidth||t!=r.offsetHeight)z=parseInt(r.offsetWidth),t=parseInt(r.offsetHeight),r.style[Q+"OriginX"]=z/2+"px",r.style[Q+"OriginY"]=t/2+"px",q=m;o=Math.round(b.R());if((b.ea!=o||q)&&!pa)b.ea=o,r.style[wa]=o+"px";b.f.ya(x,u);for(q=0;6>q;q++)if(h=b.f.i[q])a="",pa?(a+="translate3d("+z/2+"px,"+t/2+"px,0px) ",a+="perspective("+o+"px) ",a+="translate3d(0px,0px,"+o+"px) "):a+="translate3d("+z/2+"px,"+t/2+"px,"+o+"px) ",a+="rotateX("+Number(u).toFixed(10)+"deg)  rotateY("+
Number(-x).toFixed(10)+"deg) ",h.Oa&&(a+=h.Oa,h.C||(a="translate3d(-10px,-10px,0px) scale(0.001,0.001)"),h.style[Q]=a)}else if(Cc){Ta();ha&&(h=ha.getContext("2d"));if(z!=r.offsetWidth||t!=r.offsetHeight)z=parseInt(r.offsetWidth),t=parseInt(r.offsetHeight);h&&(o=h.canvas.width/2,q=h.canvas.height/2,a=h.createRadialGradient(o,q,5,o,q,Math.max(o,q)),a.addColorStop(0,"#333"),a.addColorStop(1,"#fff"),h.rect(0,0,h.canvas.width,h.canvas.height),h.fillStyle=a,h.fill(),h.fillStyle="#f00",h.font="20px Helvetica",
h.textAlign="center",h.fillText("Pan: "+x.toFixed(1),o,q-30),h.fillText("Tilt: "+u.toFixed(1),o,q),h.fillText("Fov: "+A.toFixed(1),o,q+30))}Wb()};var pa=s,Eb=s;b.setRenderFlags=function(a){a=Math.round(a);pa=a&1;Eb=a&2;4096<=a&&(Ja=a&4096,za=a&8192,Cc=a&32768)};var Cd=1,D;b.initWebGL=function(a){Dc=s;try{if(ya=a?a:document.createElement("canvas"),ya.width=100,ya.height=100,r.appendChild(ya),(f=ya.getContext("webgl"))||(f=ya.getContext("experimental-webgl")),f){f.Ia=500;f.Ha=500;f.clearColor(0,0,0,
0);if(qb&&6<qb.length){var b=parseInt(qb);f.clearColor((b>>16&255)/255,(b>>8&255)/255,(b>>0&255)/255,1)}f.enable(f.DEPTH_TEST);f.viewport(0,0,500,500);f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT);var c=f.createShader(f.FRAGMENT_SHADER);f.shaderSource(c,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nvoid main(void) {\n    gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n}\n");
f.compileShader(c);f.getShaderParameter(c,f.COMPILE_STATUS)||(alert(f.getShaderInfoLog(c)),c=p);var g=f.createShader(f.VERTEX_SHADER);f.shaderSource(g,"attribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nvarying vec2 vTextureCoord;\nvoid main(void) {\n    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n    vTextureCoord = aTextureCoord;\n}\n");f.compileShader(g);f.getShaderParameter(g,f.COMPILE_STATUS)||(alert(f.getShaderInfoLog(g)),
g=p);D=f.createProgram();f.attachShader(D,g);f.attachShader(D,c);f.linkProgram(D);f.getProgramParameter(D,f.LINK_STATUS)||alert("Could not initialise shaders");f.useProgram(D);D.Ga=f.getAttribLocation(D,"aVertexPosition");f.enableVertexAttribArray(D.Ga);D.Ea=f.getAttribLocation(D,"aTextureCoord");f.enableVertexAttribArray(D.Ea);D.ra=f.getUniformLocation(D,"uPMatrix");D.Ra=f.getUniformLocation(D,"uMVMatrix");D.Sa=f.getUniformLocation(D,"uSampler");dd(Cb);ed()}}catch(d){}f?za=m:alert("Could not initialise WebGL!")};
var aa=[],ia=new glMatrixArrayType(16),Ka=new glMatrixArrayType(16),rc,Qb,Rb;b.getPan=function(){return x};b.getPanDest=function(){return ac};b.getPanN=function(){for(var a=x;-180>a;)a+=360;for(;180<a;)a-=360;return a};b.getPanNorth=function(){for(var a=x-vd;-180>a;)a+=360;for(;180<a;)a-=360;return a};b.setPan=function(a){I();isNaN(a)||(x=Number(a));b.update()};b.changePan=function(a,e){b.setPan(b.getPan()+a);e&&(E=a)};b.changePanLog=function(a,e){b.changePan(a*da(),e)};b.getTilt=function(){return u};
b.getTiltDest=function(){return bc};b.setTilt=function(a){I();isNaN(a)||(u=Number(a));b.update()};b.changeTilt=function(a,e){b.setTilt(b.getTilt()+a);e&&(M=a)};b.changeTiltLog=function(a,e){b.changeTilt(a*da(),e)};b.getFov=function(){return A};b.getFovDest=function(){return cc};b.setFov=function(a){I();if(!isNaN(a)&&0<a&&180>a){var e=A;A=Number(a);Ta();e!=A&&b.update()}};b.changeFov=function(a,e){b.setFov(b.getFov()+a);e&&(L=a)};b.changeFovLog=function(a,e){if(!isNaN(a)){var c;c=a/90*Math.cos(A*Math.PI/
360);c=A*Math.exp(c);b.setFov(c);e&&(L=a)}};b.setPanTilt=function(a,e){I();isNaN(a)||(x=a);isNaN(e)||(u=e);b.update()};b.setPanTiltFov=function(a,e,c){I();isNaN(a)||(x=a);isNaN(e)||(u=e);!isNaN(c)&&0<c&&180>c&&(A=c);b.update()};b.setDefaultView=function(){b.setPanTiltFov(zc,Ac,Kb)};b.setLocked=function(a){b.setLockedMouse(a);b.setLockedWheel(a);b.setLockedKeyboard(a)};b.setLockedMouse=function(a){$=a};b.setLockedKeyboard=function(a){Mb=a};b.setLockedWheel=function(a){oc=a};b.moveTo=function(a,b,c,
g){I();hb=m;var d=a.toString().split("/");1<d.length&&(a=Number(d[0]),g=b,b=Number(d[1]),2<d.length&&(c=Number(d[2])));ac=isNaN(a)?x:a;bc=isNaN(b)?u:b;cc=!isNaN(c)&&0<c&&180>c?c:A;Hc=!isNaN(g)&&0<g?g:1};b.moveToDefaultView=function(a){b.moveTo(zc,Ac,Kb,a)};b.isTouching=function(){return b.m!=p};var Sa,Nb=1;I();var Zb=0,Z;b.Ua=function(){var a;a=P;b.control=a;Va();setTimeout(function(){Ba()},10);setTimeout(function(){Wa()},200);setTimeout(function(){xa();b.updatePanorama()},10);a.addEventListener?
(a.addEventListener("touchstart",Fd,s),a.addEventListener("touchmove",Ed,s),a.addEventListener("touchend",eb,s),a.addEventListener("touchcancel",db,s),a.addEventListener("MSPointerDown",cb,s),a.addEventListener("MSGestureStart",Na,s),a.addEventListener("MSGestureEnd",Ma,s),a.addEventListener("MSGestureChange",ab,s),a.addEventListener("gesturestart",Na,s),a.addEventListener("gesturechange",bb,s),a.addEventListener("gestureend",Ma,s),a.addEventListener("mousedown",bd,s),a.addEventListener("mousemove",
ad,s),document.addEventListener("mouseup",Yc,s),a.addEventListener("mousedblclick",b.toggleFullscreen,s),a.addEventListener("mousewheel",nc,s),a.addEventListener("DOMMouseScroll",nc,s),document.addEventListener("keydown",$a,s),document.addEventListener("keyup",Za,s),window.addEventListener("orientationchange",Va,s),window.addEventListener("resize",xa,s),window.addEventListener("blur",Ya,s),b.c.addEventListener("webkitfullscreenchange",La,s),document.addEventListener("mozfullscreenchange",La,s),window.addEventListener("webkitfullscreenchange",
La,s)):a.attachEvent&&(a.attachEvent("onmousedown",bd),a.attachEvent("onmousemove",ad),document.attachEvent("onmouseup",Yc),a.attachEvent("onmousedblclick",b.toggleFullscreen),a.attachEvent("onmousewheel",nc),document.attachEvent("onkeydown",$a),document.attachEvent("onkeyup",Za),window.attachEvent("onresize",xa),window.attachEvent("onblur",Ya));a.oncontextmenu=function(a){void 0===a&&(a=window.event);return!a.ctrlKey&&(a="<<U>>","U"!=a.charAt(2))?(ja(),s):m}};b.addHotspotElements=function(){for(var a=
0;a<H.length;a++)if("point"==H[a].type&&(H[a].obj=b.skinObj&&b.skinObj.addSkinHotspot?new b.skinObj.addSkinHotspot(H[a]):new Id(this,H[a]),H[a].obj&&H[a].obj.__div)){var e=P.firstChild;e?P.insertBefore(H[a].obj.__div,e):P.appendChild(H[a].obj.__div)}};b.isPlaying=function(a){return"_main"==a?m:(a=B(a))?!a.obj.ended&&!a.obj.paused:s};b.playSound=function(a,b){var c=B(a);c&&(c.obj.r=b&&!isNaN(Number(b))?Number(b)-1:c.loop-1,-1==c.obj.r&&(c.obj.r=1E7),c.obj.play())};b.playPauseSound=function(a,e){b.isPlaying(a)?
b.pauseSound(a):b.playSound(a,e)};b.pauseSound=function(a){if("_main"==a){for(a=0;a<C.length;a++)C[a].obj.pause();for(a=0;a<y.length;a++)y[a].obj.pause()}else(a=B(a))&&a.obj.pause()};b.activateSound=function(a,b){var c=B(a);c&&(0==b||1==b?c.V&&c.V(1==b):2==b&&c.o&&c.o())};b.stopSound=function(a){if("_main"==a){for(a=0;a<C.length;a++)C[a].obj.pause(),C[a].obj.currentTime=0;for(a=0;a<y.length;a++)y[a].obj.pause(),y[a].obj.currentTime=0}else if(a=B(a))a.obj.pause(),a.obj.currentTime=0};b.setVolume=function(a,
b){var c=Number(b);1<c&&(c=1);0>c&&(c=0);if("_main"==a){X=c;for(c=0;c<C.length;c++)C[c].obj.volume=C[c].j*X;for(c=0;c<y.length;c++)y[c].obj.volume=y[c].j*X}else{var g=B(a);g&&(g.j=c,g.obj.volume=c*X)}};b.changeVolume=function(a,b){if("_main"==a){var c=X,c=c+Number(b);1<c&&(c=1);0>c&&(c=0);X=c;for(c=0;c<C.length;c++)C[c].obj.volume=C[c].j*X}else{var g=B(a);g&&(c=g.j,c+=Number(b),1<c&&(c=1),0>c&&(c=0),g.j=c,g.obj.volume=c*X)}};b.removeHotspots=function(){for(var a;0<H.length;)a=H.pop(),a.obj&&(P.removeChild(a.obj.__div),
delete a.obj),a.obj=p};b.setFullscreen=function(a){var e=b.isFullscreen!=a;b.isFullscreen!=a&&(b.isFullscreen=a,b.update(100));if(b.isFullscreen){try{b.c.webkitRequestFullScreen?b.c.webkitRequestFullScreen():b.c.mozRequestFullScreen?b.c.mozRequestFullScreen():b.c.requestFullScreen?b.c.requestFullScreen():b.c.requestFullscreen&&b.c.requestFullscreen()}catch(c){}b.c.style.position="absolute";a=zb();b.c.style.left=window.pageXOffset-a.x+ba+"px";b.c.style.top=window.pageYOffset-a.y+ea+"px";document.body.style.overflow=
"hidden";e&&b.divSkin&&b.divSkin.ggEnterFullscreen&&b.divSkin.ggEnterFullscreen()}else{try{document.webkitIsFullScreen?document.webkitCancelFullScreen():document.mozFullScreen?document.mozCancelFullScreen():document.fullScreen&&(document.cancelFullScreen?document.cancelFullScreen():document.exitFullscreen&&document.exitFullscreen())}catch(g){}b.c.style.position="relative";b.c.style.left="0px";b.c.style.top="0px";document.body.style.overflow="";e&&b.divSkin&&b.divSkin.ggExitFullscreen&&b.divSkin.ggExitFullscreen()}xa()};
b.toggleFullscreen=function(){b.setFullscreen(!b.isFullscreen)};b.enterFullscreen=function(){b.setFullscreen(m)};b.exitFullscreen=function(){b.setFullscreen(s)};b.startAutorotate=function(a,b,c){ca=gb=m;kb=(new Date).getTime();a&&0!=a&&(Qa=a);b&&(fc=b);c&&(Jb=c)};b.stopAutorotate=function(){gb=ca=s};b.toggleAutorotate=function(){(ca=gb=!ca)&&(kb=(new Date).getTime())};b.createLayers=function(a){var e=s,e=s;b.ba=document.getElementById(a);b.ba?(b.ba.innerHTML="",b.c=document.createElement("div"),e&&
b.c.setAttribute("id","viewport"),a="top:  0px;left: 0px;position:relative;-ms-touch-action: none;"+(O+"user-select: none;"),b.c.setAttribute("style",a),b.ba.appendChild(b.c),r=document.createElement("div"),a="top:  0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;"+(O+"user-select: none;"),e&&r.setAttribute("id","viewer"),r.setAttribute("style",a),b.c.appendChild(r),P=document.createElement("div"),e&&P.setAttribute("id","hotspots"),a="top:  0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;z-index: 1000;",
Jd&&(a+="background-image: url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7);"),"-webkit-"==O&&(a+=O+"transform: translateZ(9999999999px);"),a+=O+"user-select: none;",P.setAttribute("style",a),b.c.appendChild(P),Y=document.createElement("canvas"),e&&Y.setAttribute("id","hotspotcanvas"),a="top:  0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;z-index: 900;"+(O+"user-select: none;"),a+=O+"pointer-events: none;",Y.setAttribute("style",a),
b.c.appendChild(Y),K=document.createElement("div"),e&&K.setAttribute("id","hotspottext"),K.setAttribute("style","top:  0px;left: 0px;position:absolute;padding: 3px;visibility: hidden;z-index: 1100;"),K.innerHTML=" Hotspot text!",b.c.appendChild(K),b.divSkin=P):alert("container not found!")};b.La=function(a){var e,c,g,d=128;qb&&(r.style.backgroundColor=qb.replace("0x","#"));a?(d=Db,Cb=1):ob>d&&(d=ob);for(g=0;6>g;g++){a?(c={},c.width=Db,c.height=Db):(c=document.createElement("canvas"),c.width=ob,c.height=
ob,c.d=c.getContext("2d"));e="position:absolute;";e+="left: 0px;";e+="top: 0px;";e+="width: "+d+"px;";e+="height: "+d+"px;";a&&(e+="outline: 1px solid transparent;");e+=O+"transform-origin: 0% 0%;";e+="-webkit-user-select: none;";e+=O+"transform: ";var f;f="";var l=1;Eb&&(l=100);f=4>g?f+("rotateY("+-90*g+"deg)"):f+("rotateX("+(4==g?-90:90)+"deg)");Eb&&(f+=" scale("+l+")");f+=" translate3d("+-d/2+"px,"+-d/2+"px,"+-d*l/(2*Cb)+"px)";e+=f+";";c.Oa=f;a||(c.setAttribute("style",e),r.insertBefore(c,r.firstChild));
b.f.i[g]=c}if(!a){for(g=0;6>g;g++)c=b.f.i[g],""!=nb[g]&&(c.D=new Image,c.D.onload=G(c),c.D.setAttribute("src",ka(nb[g])),b.checkLoaded.push(c.D));for(g=0;6>g;g++)c=b.f.i[g],c.loaded=s,c.a=new Image,c.a.onload=G(c),c.a.setAttribute("src",ka(Sb[g])),b.checkLoaded.push(c.a)}};b.setOverlayOpacity=function(a){var e;if(Ja)for(e=0;6>e;e++)b.f.ka[e]&&b.f.ka[e].style&&(b.f.ka[e].style.opacity=a)};b.removePanorama=function(){var a;if(Ja){for(a=0;a<b.f.i.length;a++)b.f.i[a].setAttribute&&(b.f.i[a].setAttribute("src",
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYBgeACDAAADIAAE3iTbkAAAAAElFTkSuQmCC"),r.removeChild(b.f.i[a]));if(F){for(a=0;a<F.length;a++){var e=F[a],c;for(c in e.g)if(e.g.hasOwnProperty(c)){var g=e.g[c];g.ia=s;g.b&&(g.d&&(g.d.clear?g.d.clear():g.d.clearRect(0,0,g.d.canvas.width,g.d.canvas.height)),unusedTileCanvas.push(g.b));g.a&&delete g.a;g.L&&f.deleteTexture(g.L);g.d=p;g.b=p;g.a=p}delete e.g}delete F;F=p}b.f.i=
[];b.f.ka=[]}if(f&&aa)for(;0<aa.length;)f.deleteTexture(aa.pop());for(a=0;a<y.length;a++)r.removeChild(y[a].obj);for(a=0;a<ra.length;a++)r.removeChild(ra[a].obj);c=[];for(a=0;a<C.length;a++)if(e=C[a],0==e.mode||1==e.mode||e.fb)c.push(e);else{try{e.obj.pause()}catch(d){}b.c.removeChild(e.obj)}C=c;y=[];ra=[]};b.getScreenResolution=function(){var a=1,b=-1!=navigator.userAgent.indexOf("Mac");window.devicePixelRatio&&b&&(a=window.devicePixelRatio);return{w:screen.width*a,h:screen.height*a}};b.getMaxScreenResolution=
function(){var a=b.getScreenResolution();return a.w>a.h?a.w:a.h};b.readConfigString=function(a,e){window.DOMParser?(parser=new DOMParser,xmlDoc=parser.parseFromString(a,"text/xml")):(xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),xmlDoc.async="false",xmlDoc.loadXML(a));b.readConfigXml(xmlDoc,e)};b.readConfigUrl=function(a,e,c){try{var f;f=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");f.open("GET",a,s);f.send(p);if(f.responseXML){var d=a.lastIndexOf("/");0<=d&&(Ab=a.substr(0,
d+1));2<=arguments.length&&e!=p&&(Ab=e);b.readConfigString(f.responseText,c)}else alert("Error loading panorama XML")}catch(k){alert("Error:"+k)}};var Ub=m;b.getCurrentNode=function(){return Gb};b.readConfigXml=function(a,e){var c=a.firstChild;pb=[];sa=[];if("tour"==c.nodeName){var f="",d;(d=c.getAttributeNode("start"))&&(f=d.nodeValue.toString());""!=b.startNode&&(f=b.startNode,b.startNode="");for(c=c.firstChild;c;){d="";if("panorama"==c.nodeName&&(d=c.getAttributeNode("id")))d=d.nodeValue.toString(),
""==f&&(f=d),pb[d]=c,sa.push(d);c=c.nextSibling}b.Ba(pb[f],e);h("{"+f+"}");b.Aa=m}else b.Aa=s,b.Ba(c,e),h(""),sa.push("")};b.Ba=function(a,e){b.removeHotspots();b.hotspot=b.emptyHotspot;b.removePanorama();b.ea=0;for(var c=a.firstChild,g,d,k,l=0;c;){if("view"==c.nodeName){(d=c.getAttributeNode("fovmode"))&&(Bc=Number(d.nodeValue));d=c.getAttributeNode("pannorth");vd=1*(d?d.nodeValue:0);for(g=c.firstChild;g;)"start"==g.nodeName&&(d=g.getAttributeNode("pan"),zc=x=Number(d?d.nodeValue:0),d=g.getAttributeNode("tilt"),
Ac=u=Number(d?d.nodeValue:0),d=g.getAttributeNode("fov"),Kb=A=Number(d?d.nodeValue:70)),"min"==g.nodeName&&(d=g.getAttributeNode("pan"),jb=1*(d?d.nodeValue:0),d=g.getAttributeNode("tilt"),Ia=1*(d?d.nodeValue:-90),d=g.getAttributeNode("fov"),ga=1*(d?d.nodeValue:5),1.0E-20>ga&&(ga=1.0E-20),d=g.getAttributeNode("fovpixel"),tc=1*(d?d.nodeValue:0)),"max"==g.nodeName&&(d=g.getAttributeNode("pan"),ib=1*(d?d.nodeValue:0),d=g.getAttributeNode("tilt"),Ha=1*(d?d.nodeValue:90),d=g.getAttributeNode("fov"),oa=
1*(d?d.nodeValue:120),180<=oa&&(oa=179.9)),g=g.nextSibling}if("autorotate"==c.nodeName&&((d=c.getAttributeNode("speed"))&&(Qa=1*d.nodeValue),(d=c.getAttributeNode("delay"))&&(fc=1*d.nodeValue),(d=c.getAttributeNode("returntohorizon"))&&(Jb=1*d.nodeValue),(d=c.getAttributeNode("nodedelay"))&&(ec=1*d.nodeValue),(d=c.getAttributeNode("noderandom"))&&(Ic=1==d.nodeValue),Ub&&(ca=gb=m,kb=(new Date).getTime()),d=c.getAttributeNode("startloaded")))(Ib=1==d.nodeValue)&&(ca=s);"input"==c.nodeName&&(k||(k=c));
if(k)for(g=0;6>g;g++)d=k.getAttributeNode("prev"+g+"url"),nb[g]=d?new String(d.nodeValue):"";"altinput"==c.nodeName&&(g=0,(d=c.getAttributeNode("screensize"))&&(g=1*d.nodeValue),0<g&&g<=b.getMaxScreenResolution()&&g>l&&(l=g,k=c));if("control"==c.nodeName&&Ub){(d=c.getAttributeNode("simulatemass"))&&($b=1==d.nodeValue);(d=c.getAttributeNode("locked"))&&($=1==d.nodeValue);d&&(Mb=1==d.nodeValue);(d=c.getAttributeNode("lockedmouse"))&&($=1==d.nodeValue);(d=c.getAttributeNode("lockedkeyboard"))&&(Mb=1==
d.nodeValue);(d=c.getAttributeNode("lockedwheel"))&&(oc=1==d.nodeValue);(d=c.getAttributeNode("invertwheel"))&&(Wc=1==d.nodeValue);(d=c.getAttributeNode("speedwheel"))&&(Xc=1*d.nodeValue);(d=c.getAttributeNode("invertcontrol"))&&(Oa=1==d.nodeValue);if(d=c.getAttributeNode("sensitivity"))fb=1*d.nodeValue,1>fb&&(fb=1);(d=c.getAttributeNode("dblclickfullscreen"))&&(jc=1==d.nodeValue)}"overlay"==c.nodeName&&((d=c.getAttributeNode("blendspeed"))&&(lb=1*d.nodeValue),(d=c.getAttributeNode("auto"))&&(Jc=
1==d.nodeValue),(d=c.getAttributeNode("delay"))&&(Kc=1*d.nodeValue));"userdata"==c.nodeName&&(b.userdata=q(c));if("hotspots"==c.nodeName)for(g=c.firstChild;g;){if("label"==g.nodeName){var h=Ob;if(d=g.getAttributeNode("enabled"))h.enabled=1==d.nodeValue;if(d=g.getAttributeNode("width"))h.width=1*d.nodeValue;if(d=g.getAttributeNode("height"))h.height=1*d.nodeValue;if(d=g.getAttributeNode("textcolor"))h.Da=1*d.nodeValue;if(d=g.getAttributeNode("textalpha"))h.Ca=1*d.nodeValue;if(d=g.getAttributeNode("background"))h.background=
1==d.nodeValue;if(d=g.getAttributeNode("backgroundalpha"))h.N=1*d.nodeValue;if(d=g.getAttributeNode("backgroundcolor"))h.O=1*d.nodeValue;if(d=g.getAttributeNode("border"))h.xa=1*d.nodeValue;if(d=g.getAttributeNode("bordercolor"))h.Q=1*d.nodeValue;if(d=g.getAttributeNode("borderalpha"))h.P=1*d.nodeValue;if(d=g.getAttributeNode("borderradius"))h.wa=1*d.nodeValue;if(d=g.getAttributeNode("wordwrap"))h.wordwrap=1==d.nodeValue}"polystyle"==g.nodeName&&((d=g.getAttributeNode("mode"))&&(U=1*d.nodeValue),
(d=g.getAttributeNode("bordercolor"))&&(uc=1*d.nodeValue),(d=g.getAttributeNode("backgroundcolor"))&&(wc=1*d.nodeValue),(d=g.getAttributeNode("borderalpha"))&&(vc=1*d.nodeValue),(d=g.getAttributeNode("backgroundalpha"))&&(xc=1*d.nodeValue));"hotspot"==g.nodeName&&(h={type:"point",pan:0,tilt:0,url:"",target:"",id:"",skinid:"",w:100,h:20,wordwrap:s,obj:p,ha:p},d=g.getAttributeNode("pan"),h.pan=1*(d?d.nodeValue:0),d=g.getAttributeNode("tilt"),h.tilt=1*(d?d.nodeValue:0),(d=g.getAttributeNode("url"))&&
(h.url=d.nodeValue.toString()),(d=g.getAttributeNode("target"))&&(h.target=d.nodeValue.toString()),(d=g.getAttributeNode("title"))&&(h.title=d.nodeValue.toString()),(d=g.getAttributeNode("id"))&&(h.id=d.nodeValue.toString()),(d=g.getAttributeNode("skinid"))&&(h.skinid=d.nodeValue.toString()),(d=c.getAttributeNode("width"))&&(h.w=d.nodeValue.toString()),(d=c.getAttributeNode("height"))&&(h.h=d.nodeValue.toString()),(d=c.getAttributeNode("wordwrap"))&&(h.wordwrap=1==d.nodeValue),H.push(h));if("polyhotspot"==
g.nodeName){h={type:"poly",url:"",target:"",id:"",skinid:"",w:100,h:20,wordwrap:s,obj:p,ha:p,p:0,A:0};(d=g.getAttributeNode("url"))&&(h.url=d.nodeValue.toString());(d=g.getAttributeNode("target"))&&(h.target=d.nodeValue.toString());(d=g.getAttributeNode("title"))&&(h.title=d.nodeValue.toString());(d=g.getAttributeNode("id"))&&(h.id=d.nodeValue.toString());h.Q=uc;h.O=wc;h.P=vc;h.N=xc;if(d=g.getAttributeNode("bordercolor"))h.Q=1*d.nodeValue;if(d=g.getAttributeNode("backgroundcolor"))h.O=1*d.nodeValue;
if(d=g.getAttributeNode("borderalpha"))h.P=1*d.nodeValue;if(d=g.getAttributeNode("backgroundalpha"))h.N=1*d.nodeValue;h.ha=[];for(var o=g.firstChild;o;){if("vertex"==o.nodeName){var t={pan:0,tilt:0};d=o.getAttributeNode("pan");t.pan=1*(d?d.nodeValue:0);d=o.getAttributeNode("tilt");t.tilt=1*(d?d.nodeValue:0);h.ha.push(t)}o=o.nextSibling}H.push(h)}g=g.nextSibling}if("sounds"==c.nodeName||"media"==c.nodeName)for(g=c.firstChild;g;){if("sound"==g.nodeName){o={id:"",url:"",loop:0,j:1,aa:0,mode:1,field:10,
pan:0,tilt:0,s:0,M:0,url:[]};if(d=g.getAttributeNode("id"))o.id=d.nodeValue.toString();(d=g.getAttributeNode("url"))&&o.url.push(d.nodeValue.toString());if(d=g.getAttributeNode("level"))o.j=Number(d.nodeValue);if(d=g.getAttributeNode("loop"))o.loop=Number(d.nodeValue);if(d=g.getAttributeNode("mode"))o.mode=Number(d.nodeValue);if(d=g.getAttributeNode("field"))o.field=Number(d.nodeValue);if(d=g.getAttributeNode("ambientlevel"))o.aa=Number(d.nodeValue);if(d=g.getAttributeNode("pan"))o.pan=Number(d.nodeValue);
if(d=g.getAttributeNode("tilt"))o.tilt=Number(d.nodeValue);if(d=g.getAttributeNode("pansize"))o.s=Number(d.nodeValue);if(d=g.getAttributeNode("tiltsize"))o.M=Number(d.nodeValue);for(h=g.firstChild;h;)"source"==h.nodeName&&(d=h.getAttributeNode("url"))&&o.url.push(d.nodeValue.toString()),h=h.nextSibling;Ua(o)}if("video"==g.nodeName){o={id:"",url:"",poster:"",loop:0,j:1,aa:0,mode:1,field:10,pan:0,tilt:0,s:0,M:0,k:0,l:0,fa:0,I:50,u:0,url:[]};if(d=g.getAttributeNode("id"))o.id=d.nodeValue.toString();
(d=g.getAttributeNode("url"))&&o.url.push(d.nodeValue.toString());if(d=g.getAttributeNode("poster"))o.poster=""+d.nodeValue;if(d=g.getAttributeNode("level"))o.j=Number(d.nodeValue);if(d=g.getAttributeNode("loop"))o.loop=Number(d.nodeValue);if(d=g.getAttributeNode("mode"))o.mode=Number(d.nodeValue);if(d=g.getAttributeNode("field"))o.field=Number(d.nodeValue);if(d=g.getAttributeNode("ambientlevel"))o.aa=Number(d.nodeValue);if(d=g.getAttributeNode("pan"))o.pan=Number(d.nodeValue);if(d=g.getAttributeNode("tilt"))o.tilt=
Number(d.nodeValue);if(d=g.getAttributeNode("pansize"))o.s=Number(d.nodeValue);if(d=g.getAttributeNode("tiltsize"))o.M=Number(d.nodeValue);if(d=g.getAttributeNode("rotx"))o.k=Number(d.nodeValue);if(d=g.getAttributeNode("roty"))o.l=Number(d.nodeValue);if(d=g.getAttributeNode("rotz"))o.fa=Number(d.nodeValue);if(d=g.getAttributeNode("fov"))o.I=Number(d.nodeValue);if(d=g.getAttributeNode("width"))o.z=Number(d.nodeValue);if(d=g.getAttributeNode("height"))o.B=Number(d.nodeValue);d=g.getAttributeNode("stretch");
o.K=d?Number(d.nodeValue):1;if(d=g.getAttributeNode("clickmode"))o.u=Number(d.nodeValue);for(h=g.firstChild;h;)"source"==h.nodeName&&(d=h.getAttributeNode("url"))&&o.url.push(d.nodeValue.toString()),h=h.nextSibling;W(o)}if("image"==g.nodeName){o={id:"",url:"",loop:0,j:1,aa:0,mode:1,field:10,pan:0,tilt:0,s:0,M:0,k:0,l:0,fa:0,I:50,u:0};if(d=g.getAttributeNode("id"))o.id=d.nodeValue.toString();if(d=g.getAttributeNode("url"))o.url=d.nodeValue.toString();if(d=g.getAttributeNode("pan"))o.pan=Number(d.nodeValue);
if(d=g.getAttributeNode("tilt"))o.tilt=Number(d.nodeValue);if(d=g.getAttributeNode("rotx"))o.k=Number(d.nodeValue);if(d=g.getAttributeNode("roty"))o.l=Number(d.nodeValue);if(d=g.getAttributeNode("rotz"))o.fa=Number(d.nodeValue);if(d=g.getAttributeNode("fov"))o.I=Number(d.nodeValue);if(d=g.getAttributeNode("width"))o.z=Number(d.nodeValue);if(d=g.getAttributeNode("height"))o.B=Number(d.nodeValue);d=g.getAttributeNode("stretch");o.K=d?Number(d.nodeValue):1;if(d=g.getAttributeNode("clickmode"))o.u=Number(d.nodeValue);
for(h=g.firstChild;h;){if("source"==h.nodeName&&(d=h.getAttributeNode("url")))o.url=d.nodeValue.toString();h=h.nextSibling}n(o)}g=g.nextSibling}c=c.nextSibling}e&&""!=e&&(d=e.toString().split("/"),0<d.length&&b.setPan(Number(d[0])),1<d.length&&b.setTilt(Number(d[1])),2<d.length&&b.setFov(Number(d[2])));if(k){for(g=0;6>g;g++)(d=k.getAttributeNode("tile"+g+"url"))&&(Sb[g]=new String(d.nodeValue));for(g=0;6>g;g++)(d=k.getAttributeNode("prev"+g+"url"))&&(nb[g]=new String(d.nodeValue));(d=k.getAttributeNode("tilesize"))&&
(ob=1*d.nodeValue);(d=k.getAttributeNode("canvassize"))&&(Db=Number(d.nodeValue));(d=k.getAttributeNode("tilescale"))&&(Cb=1*d.nodeValue);if(d=k.getAttributeNode("leveltileurl"))gd=d.nodeValue;(d=k.getAttributeNode("leveltilesize"))&&(J=Number(d.nodeValue));(d=k.getAttributeNode("levelbias"))&&(jd=Number(d.nodeValue));(d=k.getAttributeNode("overlap"))&&(qa=Number(d.nodeValue));F=[];for(g=k.firstChild;g;){if("preview"==g.nodeName&&(d=g.getAttributeNode("color")))qb=d.nodeValue;"level"==g.nodeName&&
(k={},d=g.getAttributeNode("width"),k.width=1*(d?d.nodeValue:1),k.height=1*(d?d.nodeValue:1),d=g.getAttributeNode("preload"),k.t=s,d&&(k.t=1==d.nodeValue),k.G=Math.floor((k.width+J-1)/J),k.$=Math.floor((k.height+J-1)/J),k.g={},F.push(k));g=g.nextSibling}}Cc&&(za=Ja=s,ha=document.createElement("canvas"),ha.width=100,ha.height=100,ha.id="dummycanvas",r.appendChild(ha),xa());za&&f&&(dd(Cb),ed());Ja&&(0<F.length?b.La(m):b.La(),b.ea=0);b.addHotspotElements();b.update();Ub&&b.divSkin&&b.divSkin.ggViewerInit&&
b.divSkin.ggViewerInit();Ub=s;b.hasConfig=m;xa()};b.openUrl=function(a,e){0<a.length&&(".xml"==a.substr(a.length-4)||".swf"==a.substr(a.length-4)||"{"==a.charAt(0)?b.openNext(ka(a),e):window.open(ka(a),e))};b.openNext=function(a,e){b.isLoaded=s;b.hasConfig=s;b.checkLoaded=[];Hb=0;b.divSkin&&b.divSkin.ggReLoaded&&b.divSkin.ggReLoaded();b.skinObj&&b.skinObj.hotspotProxyOut&&b.skinObj.hotspotProxyOut(b.hotspot.id);".swf"==a.substr(a.length-4)&&(a=a.substr(0,a.length-4)+".xml");var c="";e&&(c=e.toString());
c=c.replace("$cur",x+"/"+u+"/"+A);c=c.replace("$ap",x);c=c.replace("$an",b.getPanNorth());c=c.replace("$at",u);c=c.replace("$af",A);if(""!=c){var f=c.split("/");3<f.length&&""!=f[3]&&(b.startNode=f[3])}I();if("{"==a.charAt(0))if(f=a.substr(1,a.length-2),pb[f])b.Ba(pb[f],c),h(a);else{ud("invalid node id: "+f);return}else b.readConfigUrl(a,p,c);b.update(5)};b.getNodeIds=function(){return sa.slice(0)};b.getNodeUserdata=function(a){if(!a)return b.userdata;if(a=pb[a])for(a=a.firstChild;a;){if("userdata"==
a.nodeName)return q(a);a=a.nextSibling}return[]};b.getNodeLatLng=function(a){var a=b.getNodeUserdata(a),e=[];""!=a.latitude&&0!=a.latitude&&0!=a.longitude&&(e.push(a.latitude),e.push(a.longitude));return e};b.getNodeTitle=function(a){return b.getNodeUserdata(a).title};b.detectBrowser();b.createLayers(k);b.Ua()}window.ggHasHtml5Css3D=Ec;window.ggHasWebGL=Fc;window.pano2vrPlayer=pano2vrPlayer;
