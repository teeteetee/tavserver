html
html(lang='en')
head
    meta(charset='utf-8')
    meta(http-equiv='X-UA-Compatible', content='IE=edge')
    meta(name='viewport', content='width=device-width, initial-scale=1')
    title Bootstrap 101 Template
    //
       Bootstrap 
    link(href='/bootstrap/css/bootstrap.min.css', rel='stylesheet')
    //
       HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries 
    //
       WARNING: Respond.js doesn't work if you view the page via file:// 
    //if lt IE 9
      script(src='https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js')
      script(src='https://oss.maxcdn.com/respond/1.4.2/respond.min.js')
    style
     :css
      @font-face {
      font-family:roboto-thin;
      src:url('/bootstrap/fonts/Roboto-Thin.ttf');
      }
      @font-face {
      font-family:attentica;
      src:url('/bootstrap/fonts/Attentica.ttf');
      }
      @font-face {
      font-family:br;
      src:url('/bootstrap/fonts/bebasneue_regular.ttf');
      }
      h3 {
      font-family:roboto-thin;
      font-size:4vw;
      color:#333;
      letter-spacing:1px;
      }
      h1 {
      font-family:br;
      color:gray;
      }
      h2 {
      font-family:attentica;
      }
      .row {
      margin:0px;
      padding:0px;
      }
      .container {
      margin:0px;
      padding:0px;
      }
      #header{
      text-align:left;
      }
      .offer {
      border-bottom:1px solid gray;
      background-color:#ddd;
      }
      .enqnumber {
      border-left:1px solid gray;
      }
      .enquiry {
      }
      #hone {
      opacity:0.7;
      }
      #hone:hover {
      background-color:#ffc773;
      opacity:1;
      }
      #settingsblock {
      display:none;
      }
      .offerstngs {
      border-bottom:1px solid #333;
      }
      .highlightred:hover {
      background-color:#a61717;
      }
      .highlightred:hover span {
      color:#333;
      }
      .red {
      background-color:#ff4646;
      }
      .whitef {
      color:white;
      }
      .delno{
      background-color:#009999;
      color:white;
      border-left:1px solid white;
      }
      .delno:hover{
      background-color:#006363;
      }
      .delye {
      background-color:#ff4646;
      color:white;
      }
      .delye:hover {
      background-color:#a61717;
      }
      .deletion {
      display:none;
      border-bottom:1px solid #333;
      text-align:center;
      }
      #addanoffer {
      color:#00b74a;
      }
      .plus {color:#00b74a;
      border-left:2px solid white;
      }
      .plus:hover {
      background-color:#00b74a;
      }
      .plus:hover h3 span {
      color:white;
      }
      #offeradd {
      padding-right:15px;
      }
      .calendar {
      background-color:gray;
      color:white;
      cursor:pointer;
      }
      .calendar:hover {
      background-color:#ffc773;
      }
      .weeknum {
      background-color:#ffc773;
      border-right:1px solid black;
      border-bottom:1px solid black;
      }
      .day {
      border-bottom:1px solid #ddd;
      }
      .weekend h2 {
      color:#c35;
      }
      .off {
      background-color:#ddd;
      }
      #calendarblock {
      display:none;
      }
      #putithere {
      display:none;
      }
      #thismonth {
      text-align:center;
      cursor:pointer;
      }
      #nextmonth {
      text-align:left;
      cursor:pointer;
      }
      #nextmonth:hover h2 {
      color:white;
      }
      #nextmonth h2 {
      color:#ddd;
      }
      #previousmonth{
      text-align:right;
      cursor:pointer;
      }
      #previousmonth:hover h2 {
      color:white;
      }
      #previousmonth h2 {
      color:#ddd;
      }
      .navilight:hover{
      background-color:#ffc773;
      }
      .dayname {
      color:#ddd;
      
      border-bottom:1px solid #ddd;
      }
      .weekendname {
      color:#c89191;
      }
      .weeknumblank {
      border-bottom:1px solid black;
      }
      .weekdays {
      border-top:1px solid #ddd;
      }
  body
    #searchbutton(style='position: fixed; z-index: 2001; right: 0.5vw; top: 1vh;')
      h3#hone
        span.glyphicon.glyphicon-cog
      //
        background-color:#00b74a;
    .container
      #header.row
        .col-xs-12
          h1(style='color: #ddd;') Хостел номер 1
      #offers.row
        .col-xs-12
          .row
            .col-xs-12
              h3  Предложения 
          #p1500.row.offer
            .col-xs-8
              h2  Price : 1500
            #calendarbutton1.col-xs-2.calendar
              h2 Календарь
            .col-xs-2.enqnuber(style='background-color: white;')
              h2 0 enquires
          .row.enquiry
            //
               WHAT WAS THIS ONE SUPPOSED TO DO ?
          #calendarblock.row
            .col-xs-12
              .row
                #previousmonth.col-xs-2.col-xs-offset-3.navilight
                  h2
                    span(style='padding-right: 2vw;') OCTOBER
                    span.glyphicon.glyphicon-chevron-left(style='color: gray;')
                #thismonth.col-xs-2.navilight
                  h2 
                    | NOVEMBER
                #nextmonth.col-xs-2.navilight
                  h2
                    span.glyphicon.glyphicon-chevron-right(style='color: gray;')
                    span(style='padding-left: 2vw; ') DECEMBER
              #putithere.row
                .col-sx-12
                  h6#result
              .row.week.weekdays
                .col-xs-1.weeknumblank
                  h2(style='color:white;') :-)
                .col-xs-1.dayname
                  h2 MON
                .col-xs-1.dayname
                  h2 TUE
                .col-xs-1.dayname
                  h2 WED
                .col-xs-1.dayname
                  h2 THU
                .col-xs-1.dayname
                  h2 FRI
                .col-xs-1.dayname.weekendname
                  h2 SAT
                .col-xs-1.dayname.weekendname
                  h2 SUN
              .row.week
                .col-xs-1.weeknum
                  h2 42
                #d1m11.m11.col-xs-1.day
                  h2 1
                #d2m11.m11.col-xs-1.day
                  h2 2
                #d3m11.m11.col-xs-1.day
                  h2 3
                #d4m11.m11.col-xs-1.day
                  h2 4
                #d5m11.m11.col-xs-1.day
                  h2 5
                #d6m11.m11.col-xs-1.day.weekend
                  h2 6
                #d7m11.m11.col-xs-1.day.weekend
                  h2 7
              .row.week
                .col-xs-1.weeknum
                  h2 43
                #d8m11.m11.col-xs-1.day
                  h2 8
                #d9m11.m11.col-xs-1.day
                  h2 9
                #d10m11.m11.col-xs-1.day
                  h2 10
                #d11m11.m11.col-xs-1.day
                  h2 11
                #d12m11.m11.col-xs-1.day
                  h2 12
                #d13m11.m11.col-xs-1.day.weekend
                  h2 13
                #d14m11.m11.col-xs-1.day.weekend
                  h2 14
              .row.week
                .col-xs-1.weeknum
                  h2 44
                #d15m11.m11.col-xs-1.day
                  h2 15
                #d16m11.m11.col-xs-1.day
                  h2 16
                #d17m11.m11.col-xs-1.day
                  h2 17
                #d18m11.m11.col-xs-1.day
                  h2 18
                #d19m11.m11.col-xs-1.day
                  h2 19
                #d20m11.m11.col-xs-1.day.weekend
                  h2 20
                #d21m11.m11.col-xs-1.day.weekend
                  h2 21
              .row.week
                .col-xs-1.weeknum
                  h2 45
                #d22m11.m11.col-xs-1.day
                  h2 22
                #d23m11.m11.col-xs-1.day
                  h2 23
                #d24m11.m11.col-xs-1.day
                  h2 24
                #d25m11.m11.col-xs-1.day
                  h2 25
                #d26m11.m11.col-xs-1.day
                  h2 26
                #d27m11.m11.col-xs-1.day.weekend
                  h2 27
                #d28m11.m11.col-xs-1.day.weekend
                  h2 28
              .row.week
                .col-xs-1.weeknum
                  h2 45
                #d29m11.m11.col-xs-1.day
                  h2 29
                #d30m11.m11.col-xs-1.day
                  h2 30
                #d31m11.m11.col-xs-1.day
                  h2 31
                #d1m12.m12.col-xs-1.day.off
                  h2 1
                #d2m12.m12.col-xs-1.day.off
                  h2 2
                #d3m12.m12.col-xs-1.day.weekend.off
                  h2 3
                #d4m12.m12.col-xs-1.day.weekend.off
                  h2 4
      #settingsblock.row
        form(method='post', role='form', action='/hostelsettings')
          .col-xs-12
            .row
              .col-xs-12
                h3  Настройки предложений
            #offeradd.row
              .col-xs-11(style='text-align: right;')
                h2 Добавить предложение
              .col-xs-1.plus(style='text-align: right;')
                h3#addanoffer
                  span.glyphicon.glyphicon-plus
            #exstoffers.row
              .col-xs-12
                #remove1.row.deletion
                  .col-xs-2.delqu
                    h2(style='font-weight: 900;') Удалить
                  #yes1.col-xs-5.delye
                    h2(style='font-weight: 900;') ДА
                  #no1.col-xs-5.delno
                    h2(style='font-weight: 900;') НЕТ
                #offerstngs1.row.offerstngs
                  .col-xs-9
                    h1 500
                  .col-xs-2
                    h1 0 pending
                  #removebutton1.col-xs-1.highlightred.red
                    h3
                      span.glyphicon.glyphicon-remove.whitef
    //
       jQuery (necessary for Bootstrap's JavaScript plugins) 
    script(src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js')
    //
       Include all compiled plugins (below), or include individual files as needed 
    script(src='/bootstrap/js/bootstrap.min.js')
    script(src='/bootstrap/js/jquery-ui.js')
     
    script.
      // REQUEST FOR CALENDAR DATA
      var calendarcount=0;
      $("#calendarbutton1").click(function(){
      if (calendarcount%2 === 0){
      request = new XMLHttpRequest();
      request.onreadystatechange = function () {
      var DONE = this.DONE || 4;
      if (this.readyState === DONE){
      var index;
      parsed = JSON.parse(request.responseText);
      console.log(parsed);
      for (index = 0; index < parsed.length; ++index) {
          
          order=parsed[index];
          console.log(order);
          console.log('Day '+order.fday+' and month '+order.fmonth);
          eval('if($("#d'+order.fday+'m'+order.fmonth+'").text().length != 0){$("#d'+order.fday+'m'+order.fmonth+'").css({"background-color":"#64de89"});} ');

      } 
      //$('#result').append(request.responseText);
      //$('#putithere').slideToggle();
      $('#calendarblock').slideToggle();
      calendarcount++;
      }
      
      };
      request.open('POST', '/enquery/1/test', true);
      request.setRequestHeader('X-Requested-With', 'XMLHttpRequest');  // Tells server that this call is made for ajax purposes.
      request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
      // Most libraries like jQuery/Prototype/Dojo do this
      request.send("month=11&year=2014&coco=enquires");
      }//if calendarcount
      else {
       $('#calendarblock').slideToggle();
       calendarcount++;
      }
      });
      //REQUEST FOR NEXT MONTH'S CALENDAR DATA
      $("#nextmonth").click(function(){
      $('#claendarblock').css({"opacity":"0.5"});
      request = new XMLHttpRequest();
      request.onreadystatechange = function () {
      var DONE = this.DONE || 4;
      if (this.readyState === DONE){
      var index;
      parsed = JSON.parse(request.responseText);
      for (index = 0; index < parsed.length; ++index) {    
      order=parsed[index];
      console.log(order);
      console.log('Day '+order.fday+' and month '+order.fmonth);
      console.log('going to switch classes');
      $(".m12").switchClass("m12","m13");
      $(".m11").switchClass("m11","m12");
      console.log('switched classes');
      for (var i=1;i<32;i++)
      {eval("$('#d"+i+"m11').attr('id','#d"+i+"m12');");}
      for ( var i=1;i<5;i++)
      {eval("$('#d"+i+"m12').attr('id','#d"+i+"m13');");}
      eval('if($("#d'+order.fday+'m'+order.fmonth+'").text().length != 0){$("#d'+order.fday+'m'+order.fmonth+'").css({"background-color":"#64de89"});} else {$("#d'+order.fday+'m'+order.fmonth+'").css({"background-color":"white"});} ');
      $('.off').css({"background-color":"#ddd"});
      } 
      $('#thismonth').empty();
      $('#nextmonth').empty();
      $('#previousmonth').empty();
      $('#thismonth').append("<h2><span style='color:white;' class='glyphicon glyphicon-chevron-left'></span>DECEMBER</h2>");
      $('#nextmonth').append("<h2><span style='color:gray;' class='glyphicon glyphicon-chevron-right'></span> <span style='padding-left:2vw;color:#ddd;'>JANUARY</span></h2>");
      $('#previousmonth').append("<h2><span style='padding-right:2vw;color:#ddd;'>NOVEMBER</span><span style='color:gray;' class='glyphicon glyphicon-chevron-left'></span> </h2>");


      $('#calendarblock').css({"opacity":"1"});
      
      }
      };
      request.open('POST', '/enquery/1/test', true);
      request.setRequestHeader('X-Requested-With', 'XMLHttpRequest');  // Tells server that this call is made for ajax purposes.
      request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
      // Most libraries like jQuery/Prototype/Dojo do this
      request.send("month=12&year=2014&coco=enquires");
      });
      
      //BUTTONS
      $('#hone').click(function(){
      //check if any remove actions are present , discard on exit
      $('#offers').slideToggle();
      $('#settingsblock').slideToggle();
      });
      $('#removebutton1').click(function(){
      $('#remove1').slideToggle();
      $('#offerstngs1').slideToggle();
      });
      $('#no1').click(function(){
      $('#remove1').slideToggle();
      $('#offerstngs1').slideToggle();
      });
      //$('#calendarbutton1').click(function(){
      //$('#calendarblock').slideToggle();
      //});
